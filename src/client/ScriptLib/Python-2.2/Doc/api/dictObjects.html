<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>7.4.1 Dictionary Objects </title>
<META NAME="description" CONTENT="7.4.1 Dictionary Objects ">
<META NAME="keywords" CONTENT="api">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<meta http-equiv="Content-Type" content="text/html; charset=">
<link rel="STYLESHEET" href="api.css">
<link rel="first" href="api.html">
<link rel="contents" href="contents.html" title="Contents">
<link rel="index" href="genindex.html" title="Index">
<LINK REL="previous" href="mapObjects.html">
<LINK REL="up" href="mapObjects.html">
<LINK REL="next" href="otherObjects.html">
</head>
<body>
<DIV CLASS="navigation">
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td><A href="mapObjects.html"><img src="../icons/previous.gif"
  border="0" height="32"
  alt="Previous Page" width="32"></A></td>
<td><A href="mapObjects.html"><img src="../icons/up.gif"
  border="0" height="32"
  alt="Up One Level" width="32"></A></td>
<td><A href="otherObjects.html"><img src="../icons/next.gif"
  border="0" height="32"
  alt="Next Page" width="32"></A></td>
<td align="center" width="100%">Python/C API Reference Manual</td>
<td><A href="contents.html"><img src="../icons/contents.gif"
  border="0" height="32"
  alt="Contents" width="32"></A></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
<td><A href="genindex.html"><img src="../icons/index.gif"
  border="0" height="32"
  alt="Index" width="32"></A></td>
</tr></table>
<b class="navlabel">Previous:</b> <a class="sectref" href="mapObjects.html">7.4 Mapping Objects</A>
<b class="navlabel">Up:</b> <a class="sectref" href="mapObjects.html">7.4 Mapping Objects</A>
<b class="navlabel">Next:</b> <a class="sectref" href="otherObjects.html">7.5 Other Objects</A>
<br><hr>
</DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION009410000000000000000">&nbsp;</A>
<BR>
7.4.1 Dictionary Objects 
</H2>

<P>
<a name="l2h-534">&nbsp;</a><dl><dt><b><tt class="ctype"><a name="l2h-511">PyDictObject</a></tt></b>
<dd>
  This subtype of <tt class="ctype">PyObject</tt> represents a Python dictionary
  object.
</dl>

<P>
<dl><dt>PyTypeObject <b><a name="l2h-512"><tt class="cdata">PyDict_Type</tt></a></b>
<dd>
  This instance of <tt class="ctype">PyTypeObject</tt> represents the Python
  dictionary type.  This is exposed to Python programs as
  <code>types.DictType</code> and <code>types.DictionaryType</code>.
  <a name="l2h-514">&nbsp;</a></dl>

<P>
<dl><dt>int <b><a name="l2h-515"><tt class="cfunction">PyDict_Check</tt></a></b>(<var>PyObject *p</var>)
<dd>
  Returns true if its argument is a <tt class="ctype">PyDictObject</tt>.
</dl>

<P>
<dl><dt>PyObject* <b><a name="l2h-516"><tt class="cfunction">PyDict_New</tt></a></b>()
<dd>
<div class="refcount-info">
  <span class="label">Return value:</span>
  <span class="value">New reference.</span>
</div>
  Returns a new empty dictionary, or <tt class="constant">NULL</tt> on failure.
</dl>

<P>
<dl><dt>PyObject* <b><a name="l2h-517"><tt class="cfunction">PyDictProxy_New</tt></a></b>(<var>PyObject *dict</var>)
<dd>
<div class="refcount-info">
  <span class="label">Return value:</span>
  <span class="value">New reference.</span>
</div>
  Return a proxy object for a mapping which enforces read-only
  behavior.  This is normally used to create a proxy to prevent
  modification of the dictionary for non-dynamic class types.
  
<span class="versionnote">New in version 2.2.</span>

</dl>

<P>
<dl><dt>void <b><a name="l2h-518"><tt class="cfunction">PyDict_Clear</tt></a></b>(<var>PyObject *p</var>)
<dd>
  Empties an existing dictionary of all key-value pairs.
</dl>

<P>
<dl><dt>PyObject* <b><a name="l2h-519"><tt class="cfunction">PyDict_Copy</tt></a></b>(<var>PyObject *p</var>)
<dd>
<div class="refcount-info">
  <span class="label">Return value:</span>
  <span class="value">New reference.</span>
</div>
  Returns a new dictionary that contains the same key-value pairs as
  <var>p</var>.
  
<span class="versionnote">New in version 1.6.</span>

</dl>

<P>
<dl><dt>int <b><a name="l2h-520"><tt class="cfunction">PyDict_SetItem</tt></a></b>(<var>PyObject *p, PyObject *key,
                                       PyObject *val</var>)
<dd>
  Inserts <var>value</var> into the dictionary <var>p</var> with a key of
  <var>key</var>.  <var>key</var> must be hashable; if it isn't,
  <tt class="exception">TypeError</tt> will be raised.
  Returns <code>0</code> on success or <code>-1</code> on failure.
</dl>

<P>
<dl><dt>int <b><a name="l2h-521"><tt class="cfunction">PyDict_SetItemString</tt></a></b>(<var>PyObject *p,
            char *key,
            PyObject *val</var>)
<dd>
  Inserts <var>value</var> into the dictionary <var>p</var> using <var>key</var> as a
  key. <var>key</var> should be a <tt class="ctype">char*</tt>.  The key object is created
  using <code>PyString_FromString(<var>key</var>)</code>. Returns <code>0</code> on
  success or <code>-1</code> on failure.
  <a name="l2h-535">&nbsp;</a></dl>

<P>
<dl><dt>int <b><a name="l2h-522"><tt class="cfunction">PyDict_DelItem</tt></a></b>(<var>PyObject *p, PyObject *key</var>)
<dd>
  Removes the entry in dictionary <var>p</var> with key <var>key</var>.
  <var>key</var> must be hashable; if it isn't, <tt class="exception">TypeError</tt> is
  raised.
</dl>

<P>
<dl><dt>int <b><a name="l2h-523"><tt class="cfunction">PyDict_DelItemString</tt></a></b>(<var>PyObject *p, char *key</var>)
<dd>
  Removes the entry in dictionary <var>p</var> which has a key specified by
  the string <var>key</var>.  Returns <code>0</code> on success or <code>-1</code> on
  failure.
</dl>

<P>
<dl><dt>PyObject* <b><a name="l2h-524"><tt class="cfunction">PyDict_GetItem</tt></a></b>(<var>PyObject *p, PyObject *key</var>)
<dd>
<div class="refcount-info">
  <span class="label">Return value:</span>
  <span class="value">Borrowed reference.</span>
</div>
  Returns the object from dictionary <var>p</var> which has a key
  <var>key</var>.  Returns <tt class="constant">NULL</tt> if the key <var>key</var> is not present, but
  <i>without</i> setting an exception.
</dl>

<P>
<dl><dt>PyObject* <b><a name="l2h-525"><tt class="cfunction">PyDict_GetItemString</tt></a></b>(<var>PyObject *p, char *key</var>)
<dd>
<div class="refcount-info">
  <span class="label">Return value:</span>
  <span class="value">Borrowed reference.</span>
</div>
  This is the same as <tt class="cfunction">PyDict_GetItem()</tt>, but <var>key</var> is
  specified as a <tt class="ctype">char*</tt>, rather than a <tt class="ctype">PyObject*</tt>.
</dl>

<P>
<dl><dt>PyObject* <b><a name="l2h-526"><tt class="cfunction">PyDict_Items</tt></a></b>(<var>PyObject *p</var>)
<dd>
<div class="refcount-info">
  <span class="label">Return value:</span>
  <span class="value">New reference.</span>
</div>
  Returns a <tt class="ctype">PyListObject</tt> containing all the items from the
  dictionary, as in the dictinoary method <tt class="method">items()</tt> (see the
  <em class="citetitle"><a
 href="../lib/lib.html"
 title="Python Library Reference"
 >Python Library Reference</a></em>).
</dl>

<P>
<dl><dt>PyObject* <b><a name="l2h-527"><tt class="cfunction">PyDict_Keys</tt></a></b>(<var>PyObject *p</var>)
<dd>
<div class="refcount-info">
  <span class="label">Return value:</span>
  <span class="value">New reference.</span>
</div>
  Returns a <tt class="ctype">PyListObject</tt> containing all the keys from the
  dictionary, as in the dictionary method <tt class="method">keys()</tt> (see the
  <em class="citetitle"><a
 href="../lib/lib.html"
 title="Python Library Reference"
 >Python Library Reference</a></em>).
</dl>

<P>
<dl><dt>PyObject* <b><a name="l2h-528"><tt class="cfunction">PyDict_Values</tt></a></b>(<var>PyObject *p</var>)
<dd>
<div class="refcount-info">
  <span class="label">Return value:</span>
  <span class="value">New reference.</span>
</div>
  Returns a <tt class="ctype">PyListObject</tt> containing all the values from the
  dictionary <var>p</var>, as in the dictionary method <tt class="method">values()</tt>
  (see the <em class="citetitle"><a
 href="../lib/lib.html"
 title="Python Library Reference"
 >Python Library Reference</a></em>).
</dl>

<P>
<dl><dt>int <b><a name="l2h-529"><tt class="cfunction">PyDict_Size</tt></a></b>(<var>PyObject *p</var>)
<dd>
  Returns the number of items in the dictionary.  This is equivalent
  to "<tt class="samp">len(<var>p</var>)</tt>" on a dictionary.<a name="l2h-536">&nbsp;</a></dl>

<P>
<dl><dt>int <b><a name="l2h-530"><tt class="cfunction">PyDict_Next</tt></a></b>(<var>PyObject *p, int *ppos,
                                    PyObject **pkey, PyObject **pvalue</var>)
<dd>
  Iterate over all key-value pairs in the dictionary <var>p</var>.  The
  <tt class="ctype">int</tt> referred to by <var>ppos</var> must be initialized to
  <code>0</code> prior to the first call to this function to start the
  iteration; the function returns true for each pair in the
  dictionary, and false once all pairs have been reported.  The
  parameters <var>pkey</var> and <var>pvalue</var> should either point to
  <tt class="ctype">PyObject*</tt> variables that will be filled in with each key and
  value, respectively, or may be <tt class="constant">NULL</tt>.

<P>
For example:

<P>
<dl><dd><pre class="verbatim">
PyObject *key, *value;
int pos = 0;

while (PyDict_Next(self-&gt;dict, &amp;pos, &amp;key, &amp;value)) {
    /* do something interesting with the values... */
    ...
}
</pre></dl>

<P>
The dictionary <var>p</var> should not be mutated during iteration.  It
  is safe (since Python 2.1) to modify the values of the keys as you
  iterate over the dictionary, but only so long as the set of keys
  does not change.  For example:

<P>
<dl><dd><pre class="verbatim">
PyObject *key, *value;
int pos = 0;

while (PyDict_Next(self-&gt;dict, &amp;pos, &amp;key, &amp;value)) {
    int i = PyInt_AS_LONG(value) + 1;
    PyObject *o = PyInt_FromLong(i);
    if (o == NULL)
        return -1;
    if (PyDict_SetItem(self-&gt;dict, key, o) &lt; 0) {
        Py_DECREF(o);
        return -1;
    }
    Py_DECREF(o);
}
</pre></dl>
</dl>

<P>
<dl><dt>int <b><a name="l2h-531"><tt class="cfunction">PyDict_Merge</tt></a></b>(<var>PyObject *a, PyObject *b, int override</var>)
<dd>
  Iterate over mapping object <var>b</var> adding key-value pairs to dictionary
  <var>a</var>.
  <var>b</var> may be a dictionary, or any object supporting
  <tt class="function">PyMapping_Keys()</tt> and <tt class="function">PyObject_GetItem()</tt>.
  If <var>override</var> is true, existing pairs in <var>a</var> will
  be replaced if a matching key is found in <var>b</var>, otherwise pairs
  will only be added if there is not a matching key in <var>a</var>.
  Return <code>0</code> on success or <code>-1</code> if an exception was
  raised.

<span class="versionnote">New in version 2.2.</span>

</dl>

<P>
<dl><dt>int <b><a name="l2h-532"><tt class="cfunction">PyDict_Update</tt></a></b>(<var>PyObject *a, PyObject *b</var>)
<dd>
  This is the same as <code>PyDict_Merge(<var>a</var>, <var>b</var>, 1)</code> in C,
  or <code><var>a</var>.update(<var>b</var>)</code> in Python.  Return <code>0</code> on
  success or <code>-1</code> if an exception was raised.
  
<span class="versionnote">New in version 2.2.</span>

</dl>

<P>
<dl><dt>int <b><a name="l2h-533"><tt class="cfunction">PyDict_MergeFromSeq2</tt></a></b>(<var>PyObject *a, PyObject *seq2,
                                             int override</var>)
<dd>
  Update or merge into dictionary <var>a</var>, from the key-value pairs in
  <var>seq2</var>.  <var>seq2</var> must be an iterable object producing
  iterable objects of length 2, viewed as key-value pairs.  In case of
  duplicate keys, the last wins if <var>override</var> is true, else the
  first wins.
  Return <code>0</code> on success or <code>-1</code> if an exception
  was raised.
  Equivalent Python (except for the return value):

<P>
<dl><dd><pre class="verbatim">
def PyDict_MergeFromSeq2(a, seq2, override):
    for key, value in seq2:
        if override or key not in a:
            a[key] = value
</pre></dl>

<P>

<span class="versionnote">New in version 2.2.</span>

</dl>

<P>

<DIV CLASS="navigation">
<p><hr>
<table align="center" width="100%" cellpadding="0" cellspacing="2">
<tr>
<td><A href="mapObjects.html"><img src="../icons/previous.gif"
  border="0" height="32"
  alt="Previous Page" width="32"></A></td>
<td><A href="mapObjects.html"><img src="../icons/up.gif"
  border="0" height="32"
  alt="Up One Level" width="32"></A></td>
<td><A href="otherObjects.html"><img src="../icons/next.gif"
  border="0" height="32"
  alt="Next Page" width="32"></A></td>
<td align="center" width="100%">Python/C API Reference Manual</td>
<td><A href="contents.html"><img src="../icons/contents.gif"
  border="0" height="32"
  alt="Contents" width="32"></A></td>
<td><img src="../icons/blank.gif"
  border="0" height="32"
  alt="" width="32"></td>
<td><A href="genindex.html"><img src="../icons/index.gif"
  border="0" height="32"
  alt="Index" width="32"></A></td>
</tr></table>
<b class="navlabel">Previous:</b> <a class="sectref" href="mapObjects.html">7.4 Mapping Objects</A>
<b class="navlabel">Up:</b> <a class="sectref" href="mapObjects.html">7.4 Mapping Objects</A>
<b class="navlabel">Next:</b> <a class="sectref" href="otherObjects.html">7.5 Other Objects</A>
<hr>
<span class="release-info">Release 2.2, documentation updated on December 21, 2001.</span>
</DIV>
<!--End of Navigation Panel-->
<ADDRESS>
See <i><a href="about.html">About this document...</a></i> for information on suggesting changes.
</ADDRESS>
</BODY>
</HTML>

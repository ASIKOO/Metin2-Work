; Listing generated by Microsoft (R) Optimizing Compiler Version 19.28.29335.0 

	TITLE	D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterBase\TempFile.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??0CTempFile@@QAE@PBD@Z				; CTempFile::CTempFile
PUBLIC	??1CTempFile@@UAE@XZ				; CTempFile::~CTempFile
PUBLIC	??_GCTempFile@@UAEPAXI@Z			; CTempFile::`scalar deleting destructor'
PUBLIC	??_7CTempFile@@6B@				; CTempFile::`vftable'
PUBLIC	??_C@_0EC@OBCJOLKA@CTempFile?3?3CTempFile?5cannot?5cre@ ; `string'
PUBLIC	??_R4CTempFile@@6B@				; CTempFile::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCTempFile@@@8				; CTempFile `RTTI Type Descriptor'
PUBLIC	??_R3CTempFile@@8				; CTempFile::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CTempFile@@8				; CTempFile::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CTempFile@@8			; CTempFile::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R1A@?0A@EA@CFileBase@@8			; CFileBase::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	??_R0?AVCFileBase@@@8				; CFileBase `RTTI Type Descriptor'
PUBLIC	??_R3CFileBase@@8				; CFileBase::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CFileBase@@8				; CFileBase::`RTTI Base Class Array'
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	_strncpy:PROC
EXTRN	__imp__DeleteFileA@4:PROC
EXTRN	??0CFileBase@@QAE@XZ:PROC			; CFileBase::CFileBase
EXTRN	??1CFileBase@@UAE@XZ:PROC			; CFileBase::~CFileBase
EXTRN	?Destroy@CFileBase@@QAEXXZ:PROC			; CFileBase::Destroy
EXTRN	?Create@CFileBase@@QAEHPBDW4EFileMode@1@@Z:PROC	; CFileBase::Create
EXTRN	?Write@CFileBase@@UAEHPBXH@Z:PROC		; CFileBase::Write
EXTRN	??_ECTempFile@@UAEPAXI@Z:PROC			; CTempFile::`vector deleting destructor'
EXTRN	?CreateTempFileName@@YAPBDPBD@Z:PROC		; CreateTempFileName
EXTRN	?TraceError@@YAXPBDZZ:PROC			; TraceError
EXTRN	@__security_check_cookie@4:PROC
EXTRN	___CxxFrameHandler3:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	___security_cookie:DWORD
;	COMDAT ??_R2CFileBase@@8
rdata$r	SEGMENT
??_R2CFileBase@@8 DD FLAT:??_R1A@?0A@EA@CFileBase@@8	; CFileBase::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CFileBase@@8
rdata$r	SEGMENT
??_R3CFileBase@@8 DD 00H				; CFileBase::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CFileBase@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCFileBase@@@8
data$rs	SEGMENT
??_R0?AVCFileBase@@@8 DD FLAT:??_7type_info@@6B@	; CFileBase `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCFileBase@@', 00H
data$rs	ENDS
;	COMDAT ??_R1A@?0A@EA@CFileBase@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CFileBase@@8 DD FLAT:??_R0?AVCFileBase@@@8 ; CFileBase::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CFileBase@@8
rdata$r	ENDS
;	COMDAT ??_R1A@?0A@EA@CTempFile@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CTempFile@@8 DD FLAT:??_R0?AVCTempFile@@@8 ; CTempFile::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	01H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CTempFile@@8
rdata$r	ENDS
;	COMDAT ??_R2CTempFile@@8
rdata$r	SEGMENT
??_R2CTempFile@@8 DD FLAT:??_R1A@?0A@EA@CTempFile@@8	; CTempFile::`RTTI Base Class Array'
	DD	FLAT:??_R1A@?0A@EA@CFileBase@@8
rdata$r	ENDS
;	COMDAT ??_R3CTempFile@@8
rdata$r	SEGMENT
??_R3CTempFile@@8 DD 00H				; CTempFile::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	02H
	DD	FLAT:??_R2CTempFile@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCTempFile@@@8
data$rs	SEGMENT
??_R0?AVCTempFile@@@8 DD FLAT:??_7type_info@@6B@	; CTempFile `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCTempFile@@', 00H
data$rs	ENDS
;	COMDAT ??_R4CTempFile@@6B@
rdata$r	SEGMENT
??_R4CTempFile@@6B@ DD 00H				; CTempFile::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCTempFile@@@8
	DD	FLAT:??_R3CTempFile@@8
rdata$r	ENDS
;	COMDAT ??_C@_0EC@OBCJOLKA@CTempFile?3?3CTempFile?5cannot?5cre@
CONST	SEGMENT
??_C@_0EC@OBCJOLKA@CTempFile?3?3CTempFile?5cannot?5cre@ DB 'CTempFile::CT'
	DB	'empFile cannot create temporary file. (filename: %s)', 00H ; `string'
CONST	ENDS
;	COMDAT ??_7CTempFile@@6B@
CONST	SEGMENT
??_7CTempFile@@6B@ DD FLAT:??_R4CTempFile@@6B@		; CTempFile::`vftable'
	DD	FLAT:??_ECTempFile@@UAEPAXI@Z
	DD	FLAT:?Write@CFileBase@@UAEHPBXH@Z
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__ehfuncinfo$??1CTempFile@@UAE@XZ DD 019930522H
	DD	00H
	DD	00H
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	05H
xdata$x	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__unwindtable$??0CTempFile@@QAE@PBD@Z DD 0ffffffffH
	DD	FLAT:__unwindfunclet$??0CTempFile@@QAE@PBD@Z$0
__ehfuncinfo$??0CTempFile@@QAE@PBD@Z DD 019930522H
	DD	01H
	DD	FLAT:__unwindtable$??0CTempFile@@QAE@PBD@Z
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	01H
xdata$x	ENDS
; Function compile flags: /Odspy
;	COMDAT ??_GCTempFile@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCTempFile@@UAEPAXI@Z PROC				; CTempFile::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  00007	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000a	e8 00 00 00 00	 call	 ??1CTempFile@@UAE@XZ	; CTempFile::~CTempFile
  0000f	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00012	83 e0 01	 and	 eax, 1
  00015	74 0f		 je	 SHORT $LN2@scalar
  00017	68 20 02 00 00	 push	 544			; 00000220H
  0001c	ff 75 fc	 push	 DWORD PTR _this$[ebp]
  0001f	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  00024	59		 pop	 ecx
  00025	59		 pop	 ecx
$LN2@scalar:
  00026	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00029	c9		 leave
  0002a	c2 04 00	 ret	 4
??_GCTempFile@@UAEPAXI@Z ENDP				; CTempFile::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterBase\TempFile.cpp
;	COMDAT ??1CTempFile@@UAE@XZ
_TEXT	SEGMENT
_this$ = -16						; size = 4
__$EHRec$ = -12						; size = 12
??1CTempFile@@UAE@XZ PROC				; CTempFile::~CTempFile, COMDAT
; _this$ = ecx

; 7    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$??1CTempFile@@UAE@XZ
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	51		 push	 ecx
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00017	33 c5		 xor	 eax, ebp
  00019	50		 push	 eax
  0001a	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  0001d	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00023	89 4d f0	 mov	 DWORD PTR _this$[ebp], ecx
  00026	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00029	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CTempFile@@6B@

; 8    : 	Destroy();

  0002f	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00032	e8 00 00 00 00	 call	 ?Destroy@CFileBase@@QAEXXZ ; CFileBase::Destroy

; 9    : 	DeleteFile(m_szFileName);

  00037	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  0003a	05 18 01 00 00	 add	 eax, 280		; 00000118H
  0003f	50		 push	 eax
  00040	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__DeleteFileA@4

; 10   : }

  00046	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00049	e8 00 00 00 00	 call	 ??1CFileBase@@UAE@XZ	; CFileBase::~CFileBase
  0004e	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00051	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00058	59		 pop	 ecx
  00059	c9		 leave
  0005a	c3		 ret	 0
  0005b	cc		 int	 3
  0005c	cc		 int	 3
  0005d	cc		 int	 3
  0005e	cc		 int	 3
  0005f	cc		 int	 3
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__ehhandler$??1CTempFile@@UAE@XZ:
  00000	90		 npad	 1
  00001	90		 npad	 1
  00002	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00006	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  00009	8b 4a f8	 mov	 ecx, DWORD PTR [edx-8]
  0000c	33 c8		 xor	 ecx, eax
  0000e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00013	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$??1CTempFile@@UAE@XZ
  00018	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
??1CTempFile@@UAE@XZ ENDP				; CTempFile::~CTempFile
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterBase\TempFile.cpp
;	COMDAT ??0CTempFile@@QAE@PBD@Z
_TEXT	SEGMENT
_this$ = -16						; size = 4
__$EHRec$ = -12						; size = 12
_c_pszPrefix$ = 8					; size = 4
??0CTempFile@@QAE@PBD@Z PROC				; CTempFile::CTempFile, COMDAT
; _this$ = ecx

; 13   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$??0CTempFile@@QAE@PBD@Z
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	51		 push	 ecx
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00017	33 c5		 xor	 eax, ebp
  00019	50		 push	 eax
  0001a	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  0001d	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00023	89 4d f0	 mov	 DWORD PTR _this$[ebp], ecx
  00026	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00029	e8 00 00 00 00	 call	 ??0CFileBase@@QAE@XZ	; CFileBase::CFileBase
  0002e	83 65 fc 00	 and	 DWORD PTR __$EHRec$[ebp+8], 0
  00032	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00035	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CTempFile@@6B@

; 14   : 	strncpy(m_szFileName, CreateTempFileName(c_pszPrefix), MAX_PATH);

  0003b	68 04 01 00 00	 push	 260			; 00000104H
  00040	ff 75 08	 push	 DWORD PTR _c_pszPrefix$[ebp]
  00043	e8 00 00 00 00	 call	 ?CreateTempFileName@@YAPBDPBD@Z ; CreateTempFileName
  00048	59		 pop	 ecx
  00049	50		 push	 eax
  0004a	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  0004d	05 18 01 00 00	 add	 eax, 280		; 00000118H
  00052	50		 push	 eax
  00053	e8 00 00 00 00	 call	 _strncpy
  00058	83 c4 0c	 add	 esp, 12			; 0000000cH

; 15   : 
; 16   : 	if (!Create(m_szFileName, CFileBase::FILEMODE_WRITE))

  0005b	6a 02		 push	 2
  0005d	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00060	05 18 01 00 00	 add	 eax, 280		; 00000118H
  00065	50		 push	 eax
  00066	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00069	e8 00 00 00 00	 call	 ?Create@CFileBase@@QAEHPBDW4EFileMode@1@@Z ; CFileBase::Create
  0006e	85 c0		 test	 eax, eax
  00070	75 15		 jne	 SHORT $LN1@CTempFile

; 17   : 	{
; 18   : 		TraceError("CTempFile::CTempFile cannot create temporary file. (filename: %s)", m_szFileName);

  00072	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00075	05 18 01 00 00	 add	 eax, 280		; 00000118H
  0007a	50		 push	 eax
  0007b	68 00 00 00 00	 push	 OFFSET ??_C@_0EC@OBCJOLKA@CTempFile?3?3CTempFile?5cannot?5cre@
  00080	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00085	59		 pop	 ecx
  00086	59		 pop	 ecx
$LN1@CTempFile:

; 19   : 		return;
; 20   : 	}
; 21   : }

  00087	83 4d fc ff	 or	 DWORD PTR __$EHRec$[ebp+8], -1
  0008b	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  0008e	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  00091	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00098	59		 pop	 ecx
  00099	c9		 leave
  0009a	c2 04 00	 ret	 4
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__unwindfunclet$??0CTempFile@@QAE@PBD@Z$0:
  00000	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00003	e9 00 00 00 00	 jmp	 ??1CFileBase@@UAE@XZ	; CFileBase::~CFileBase
  00008	cc		 int	 3
  00009	cc		 int	 3
  0000a	cc		 int	 3
  0000b	cc		 int	 3
  0000c	cc		 int	 3
__ehhandler$??0CTempFile@@QAE@PBD@Z:
  0000d	90		 npad	 1
  0000e	90		 npad	 1
  0000f	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00013	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  00016	8b 4a f8	 mov	 ecx, DWORD PTR [edx-8]
  00019	33 c8		 xor	 ecx, eax
  0001b	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00020	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$??0CTempFile@@QAE@PBD@Z
  00025	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
??0CTempFile@@QAE@PBD@Z ENDP				; CTempFile::CTempFile
END

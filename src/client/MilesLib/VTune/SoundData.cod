; Listing generated by Microsoft (R) Optimizing Compiler Version 19.28.29335.0 

	TITLE	D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	?ms_isSoundFile@CSoundData@@0PA_NA		; CSoundData::ms_isSoundFile
_BSS	SEGMENT
?ms_isSoundFile@CSoundData@@0PA_NA DB 05H DUP (?)	; CSoundData::ms_isSoundFile
_BSS	ENDS
PUBLIC	?SetPackMode@CSoundData@@SAXXZ			; CSoundData::SetPackMode
PUBLIC	??0CSoundData@@QAE@XZ				; CSoundData::CSoundData
PUBLIC	??1CSoundData@@UAE@XZ				; CSoundData::~CSoundData
PUBLIC	?Assign@CSoundData@@QAEXPBD@Z			; CSoundData::Assign
PUBLIC	?Get@CSoundData@@QAEPAXXZ			; CSoundData::Get
PUBLIC	?GetSize@CSoundData@@QAEKXZ			; CSoundData::GetSize
PUBLIC	?Release@CSoundData@@QAEXXZ			; CSoundData::Release
PUBLIC	?GetAccessTime@CSoundData@@QAEKXZ		; CSoundData::GetAccessTime
PUBLIC	?GetFileName@CSoundData@@QAEPBDXZ		; CSoundData::GetFileName
PUBLIC	?SetPlayTime@CSoundData@@QAEXK@Z		; CSoundData::SetPlayTime
PUBLIC	?GetPlayTime@CSoundData@@QAEKXZ			; CSoundData::GetPlayTime
PUBLIC	?ReadFromDisk@CSoundData@@IAE_NXZ		; CSoundData::ReadFromDisk
PUBLIC	?Destroy@CSoundData@@IAEXXZ			; CSoundData::Destroy
PUBLIC	?open_callback@CSoundData@@CGKPBDPAK@Z		; CSoundData::open_callback
PUBLIC	?close_callback@CSoundData@@CGXK@Z		; CSoundData::close_callback
PUBLIC	?seek_callback@CSoundData@@CGJKJK@Z		; CSoundData::seek_callback
PUBLIC	?read_callback@CSoundData@@CGKKPAXK@Z		; CSoundData::read_callback
PUBLIC	?isSlotIndex@CSoundData@@CA_NK@Z		; CSoundData::isSlotIndex
PUBLIC	?GetEmptySlotIndex@CSoundData@@CAHXZ		; CSoundData::GetEmptySlotIndex
PUBLIC	??_GCSoundData@@UAEPAXI@Z			; CSoundData::`scalar deleting destructor'
PUBLIC	?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A	; CSoundData::ms_SoundFile
PUBLIC	??_7CSoundData@@6B@				; CSoundData::`vftable'
PUBLIC	?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A ; CSingleton<CEterPackManager>::ms_singleton
PUBLIC	??_R4CSoundData@@6B@				; CSoundData::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCSoundData@@@8				; CSoundData `RTTI Type Descriptor'
PUBLIC	??_R3CSoundData@@8				; CSoundData::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CSoundData@@8				; CSoundData::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CSoundData@@8			; CSoundData::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??_L@YGXPAXIIP6EX0@Z1@Z:PROC			; `eh vector constructor iterator'
EXTRN	??_M@YGXPAXIIP6EX0@Z@Z:PROC			; `eh vector destructor iterator'
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	_atexit:PROC
EXTRN	___report_rangecheckfailure:PROC
EXTRN	_strncpy:PROC
EXTRN	__imp__QueryPerformanceCounter@4:PROC
EXTRN	__imp__AIL_mem_free_lock@4:PROC
EXTRN	__imp__AIL_file_read@8:PROC
EXTRN	__imp__AIL_set_file_callbacks@16:PROC
EXTRN	__imp__AIL_WAV_info@8:PROC
EXTRN	__imp__AIL_decompress_ASI@24:PROC
EXTRN	__imp__AIL_decompress_ADPCM@12:PROC
EXTRN	__imp__AIL_file_type@8:PROC
EXTRN	??0CMappedFile@@QAE@XZ:PROC			; CMappedFile::CMappedFile
EXTRN	??1CMappedFile@@UAE@XZ:PROC			; CMappedFile::~CMappedFile
EXTRN	?Destroy@CMappedFile@@QAEXXZ:PROC		; CMappedFile::Destroy
EXTRN	?Seek@CMappedFile@@QAEHKH@Z:PROC		; CMappedFile::Seek
EXTRN	?Size@CMappedFile@@QAEKXZ:PROC			; CMappedFile::Size
EXTRN	?Read@CMappedFile@@QAEHPAXH@Z:PROC		; CMappedFile::Read
EXTRN	??_ECSoundData@@UAEPAXI@Z:PROC			; CSoundData::`vector deleting destructor'
EXTRN	?Get@CEterPackManager@@QAE_NAAVCMappedFile@@PBDPAPBX@Z:PROC ; CEterPackManager::Get
EXTRN	?ELTimer_GetMSec@@YAKXZ:PROC			; ELTimer_GetMSec
EXTRN	@__security_check_cookie@4:PROC
EXTRN	___CxxFrameHandler3:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	___security_cookie:DWORD
_BSS	SEGMENT
	ALIGN	4

?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A DB 0654H DUP (?) ; CSoundData::ms_SoundFile
_BSS	ENDS
;	COMDAT ?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A DD 01H DUP (?) ; CSingleton<CEterPackManager>::ms_singleton
_BSS	ENDS
CRT$XCU	SEGMENT
??ms_SoundFile$initializer$@CSoundData@@0P6AXXZA@@3P6AXXZA DD FLAT:??__E?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A@@YAXXZ ; ??ms_SoundFile$initializer$@CSoundData@@0P6AXXZA@@3P6AXXZA
CRT$XCU	ENDS
;	COMDAT ??_R1A@?0A@EA@CSoundData@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CSoundData@@8 DD FLAT:??_R0?AVCSoundData@@@8 ; CSoundData::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CSoundData@@8
rdata$r	ENDS
;	COMDAT ??_R2CSoundData@@8
rdata$r	SEGMENT
??_R2CSoundData@@8 DD FLAT:??_R1A@?0A@EA@CSoundData@@8	; CSoundData::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CSoundData@@8
rdata$r	SEGMENT
??_R3CSoundData@@8 DD 00H				; CSoundData::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CSoundData@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCSoundData@@@8
data$rs	SEGMENT
??_R0?AVCSoundData@@@8 DD FLAT:??_7type_info@@6B@	; CSoundData `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCSoundData@@', 00H
data$rs	ENDS
;	COMDAT ??_R4CSoundData@@6B@
rdata$r	SEGMENT
??_R4CSoundData@@6B@ DD 00H				; CSoundData::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCSoundData@@@8
	DD	FLAT:??_R3CSoundData@@8
rdata$r	ENDS
;	COMDAT ??_7CSoundData@@6B@
CONST	SEGMENT
??_7CSoundData@@6B@ DD FLAT:??_R4CSoundData@@6B@	; CSoundData::`vftable'
	DD	FLAT:??_ECSoundData@@UAEPAXI@Z
CONST	ENDS
;	COMDAT xdata$x
xdata$x	SEGMENT
__ehfuncinfo$??1CSoundData@@UAE@XZ DD 019930522H
	DD	00H
	DD	00H
	DD	2 DUP(00H)
	DD	2 DUP(00H)
	DD	00H
	DD	05H
xdata$x	ENDS
; Function compile flags: /Odspy
;	COMDAT ??__F?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A@@YAXXZ
text$yd	SEGMENT
??__F?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A@@YAXXZ PROC ; `dynamic atexit destructor for 'CSoundData::ms_SoundFile'', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	68 00 00 00 00	 push	 OFFSET ??1CMappedFile@@UAE@XZ ; CMappedFile::~CMappedFile
  00008	6a 05		 push	 5
  0000a	68 44 01 00 00	 push	 324			; 00000144H
  0000f	68 00 00 00 00	 push	 OFFSET ?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A ; CSoundData::ms_SoundFile
  00014	e8 00 00 00 00	 call	 ??_M@YGXPAXIIP6EX0@Z@Z
  00019	5d		 pop	 ebp
  0001a	c3		 ret	 0
??__F?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A@@YAXXZ ENDP ; `dynamic atexit destructor for 'CSoundData::ms_SoundFile''
text$yd	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ??__E?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A@@YAXXZ
text$di	SEGMENT
??__E?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A@@YAXXZ PROC ; `dynamic initializer for 'CSoundData::ms_SoundFile'', COMDAT

; 8    : CMappedFile CSoundData::ms_SoundFile[SOUND_FILE_MAX_NUM];

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	68 00 00 00 00	 push	 OFFSET ??1CMappedFile@@UAE@XZ ; CMappedFile::~CMappedFile
  00008	68 00 00 00 00	 push	 OFFSET ??0CMappedFile@@QAE@XZ ; CMappedFile::CMappedFile
  0000d	6a 05		 push	 5
  0000f	68 44 01 00 00	 push	 324			; 00000144H
  00014	68 00 00 00 00	 push	 OFFSET ?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A ; CSoundData::ms_SoundFile
  00019	e8 00 00 00 00	 call	 ??_L@YGXPAXIIP6EX0@Z1@Z
  0001e	68 00 00 00 00	 push	 OFFSET ??__F?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A@@YAXXZ ; `dynamic atexit destructor for 'CSoundData::ms_SoundFile''
  00023	e8 00 00 00 00	 call	 _atexit
  00028	59		 pop	 ecx
  00029	5d		 pop	 ebp
  0002a	c3		 ret	 0
??__E?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A@@YAXXZ ENDP ; `dynamic initializer for 'CSoundData::ms_SoundFile''
text$di	ENDS
; Function compile flags: /Odspy
;	COMDAT ??_GCSoundData@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCSoundData@@UAEPAXI@Z PROC				; CSoundData::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  00007	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000a	e8 00 00 00 00	 call	 ??1CSoundData@@UAE@XZ	; CSoundData::~CSoundData
  0000f	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00012	83 e0 01	 and	 eax, 1
  00015	74 0f		 je	 SHORT $LN2@scalar
  00017	68 a0 00 00 00	 push	 160			; 000000a0H
  0001c	ff 75 fc	 push	 DWORD PTR _this$[ebp]
  0001f	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  00024	59		 pop	 ecx
  00025	59		 pop	 ecx
$LN2@scalar:
  00026	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00029	c9		 leave
  0002a	c2 04 00	 ret	 4
??_GCSoundData@@UAEPAXI@Z ENDP				; CSoundData::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?GetEmptySlotIndex@CSoundData@@CAHXZ
_TEXT	SEGMENT
_i$1 = -4						; size = 4
?GetEmptySlotIndex@CSoundData@@CAHXZ PROC		; CSoundData::GetEmptySlotIndex, COMDAT

; 125  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 126  : 	for (int i = 0; i < SOUND_FILE_MAX_NUM; ++i)

  00004	83 65 fc 00	 and	 DWORD PTR _i$1[ebp], 0
  00008	eb 07		 jmp	 SHORT $LN4@GetEmptySl
$LN2@GetEmptySl:
  0000a	8b 45 fc	 mov	 eax, DWORD PTR _i$1[ebp]
  0000d	40		 inc	 eax
  0000e	89 45 fc	 mov	 DWORD PTR _i$1[ebp], eax
$LN4@GetEmptySl:
  00011	83 7d fc 05	 cmp	 DWORD PTR _i$1[ebp], 5
  00015	7d 15		 jge	 SHORT $LN3@GetEmptySl

; 127  : 	{
; 128  : 		if (!ms_isSoundFile[i])

  00017	8b 45 fc	 mov	 eax, DWORD PTR _i$1[ebp]
  0001a	0f b6 80 00 00
	00 00		 movzx	 eax, BYTE PTR ?ms_isSoundFile@CSoundData@@0PA_NA[eax]
  00021	85 c0		 test	 eax, eax
  00023	75 05		 jne	 SHORT $LN5@GetEmptySl

; 129  : 			return i;

  00025	8b 45 fc	 mov	 eax, DWORD PTR _i$1[ebp]
  00028	eb 05		 jmp	 SHORT $LN1@GetEmptySl
$LN5@GetEmptySl:

; 130  : 	}

  0002a	eb de		 jmp	 SHORT $LN2@GetEmptySl
$LN3@GetEmptySl:

; 131  : 
; 132  : 	return -1;

  0002c	83 c8 ff	 or	 eax, -1
$LN1@GetEmptySl:

; 133  : }

  0002f	c9		 leave
  00030	c3		 ret	 0
?GetEmptySlotIndex@CSoundData@@CAHXZ ENDP		; CSoundData::GetEmptySlotIndex
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?isSlotIndex@CSoundData@@CA_NK@Z
_TEXT	SEGMENT
_dwIndex$ = 8						; size = 4
?isSlotIndex@CSoundData@@CA_NK@Z PROC			; CSoundData::isSlotIndex, COMDAT

; 114  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 115  : 	if (dwIndex >= SOUND_FILE_MAX_NUM)

  00003	83 7d 08 05	 cmp	 DWORD PTR _dwIndex$[ebp], 5
  00007	72 04		 jb	 SHORT $LN2@isSlotInde

; 116  : 		return false;

  00009	32 c0		 xor	 al, al
  0000b	eb 14		 jmp	 SHORT $LN1@isSlotInde
$LN2@isSlotInde:

; 117  : 
; 118  : 	if (!ms_isSoundFile[dwIndex])

  0000d	8b 45 08	 mov	 eax, DWORD PTR _dwIndex$[ebp]
  00010	0f b6 80 00 00
	00 00		 movzx	 eax, BYTE PTR ?ms_isSoundFile@CSoundData@@0PA_NA[eax]
  00017	85 c0		 test	 eax, eax
  00019	75 04		 jne	 SHORT $LN3@isSlotInde

; 119  : 		return false;

  0001b	32 c0		 xor	 al, al
  0001d	eb 02		 jmp	 SHORT $LN1@isSlotInde
$LN3@isSlotInde:

; 120  : 
; 121  : 	return true;

  0001f	b0 01		 mov	 al, 1
$LN1@isSlotInde:

; 122  : }

  00021	5d		 pop	 ebp
  00022	c3		 ret	 0
?isSlotIndex@CSoundData@@CA_NK@Z ENDP			; CSoundData::isSlotIndex
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?read_callback@CSoundData@@CGKKPAXK@Z
_TEXT	SEGMENT
_dwRealSize$ = -8					; size = 4
tv77 = -4						; size = 4
_file_handle$ = 8					; size = 4
_buffer$ = 12						; size = 4
_bytes$ = 16						; size = 4
?read_callback@CSoundData@@CGKKPAXK@Z PROC		; CSoundData::read_callback, COMDAT

; 171  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	51		 push	 ecx

; 172  : 	if (!isSlotIndex(file_handle))

  00005	ff 75 08	 push	 DWORD PTR _file_handle$[ebp]
  00008	e8 00 00 00 00	 call	 ?isSlotIndex@CSoundData@@CA_NK@Z ; CSoundData::isSlotIndex
  0000d	59		 pop	 ecx
  0000e	0f b6 c0	 movzx	 eax, al
  00011	85 c0		 test	 eax, eax
  00013	75 04		 jne	 SHORT $LN2@read_callb

; 173  : 		return 0;

  00015	33 c0		 xor	 eax, eax
  00017	eb 55		 jmp	 SHORT $LN1@read_callb
$LN2@read_callb:

; 174  : 
; 175  : 	DWORD dwRealSize = min(ms_SoundFile[file_handle].Size(), bytes);

  00019	69 4d 08 44 01
	00 00		 imul	 ecx, DWORD PTR _file_handle$[ebp], 324
  00020	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A ; CSoundData::ms_SoundFile
  00026	e8 00 00 00 00	 call	 ?Size@CMappedFile@@QAEKXZ ; CMappedFile::Size
  0002b	3b 45 10	 cmp	 eax, DWORD PTR _bytes$[ebp]
  0002e	73 17		 jae	 SHORT $LN4@read_callb
  00030	69 4d 08 44 01
	00 00		 imul	 ecx, DWORD PTR _file_handle$[ebp], 324
  00037	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A ; CSoundData::ms_SoundFile
  0003d	e8 00 00 00 00	 call	 ?Size@CMappedFile@@QAEKXZ ; CMappedFile::Size
  00042	89 45 fc	 mov	 DWORD PTR tv77[ebp], eax
  00045	eb 06		 jmp	 SHORT $LN5@read_callb
$LN4@read_callb:
  00047	8b 45 10	 mov	 eax, DWORD PTR _bytes$[ebp]
  0004a	89 45 fc	 mov	 DWORD PTR tv77[ebp], eax
$LN5@read_callb:
  0004d	8b 45 fc	 mov	 eax, DWORD PTR tv77[ebp]
  00050	89 45 f8	 mov	 DWORD PTR _dwRealSize$[ebp], eax

; 176  : 	ms_SoundFile[file_handle].Read(buffer, dwRealSize);

  00053	ff 75 f8	 push	 DWORD PTR _dwRealSize$[ebp]
  00056	ff 75 0c	 push	 DWORD PTR _buffer$[ebp]
  00059	69 4d 08 44 01
	00 00		 imul	 ecx, DWORD PTR _file_handle$[ebp], 324
  00060	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A ; CSoundData::ms_SoundFile
  00066	e8 00 00 00 00	 call	 ?Read@CMappedFile@@QAEHPAXH@Z ; CMappedFile::Read

; 177  : 	return dwRealSize;

  0006b	8b 45 f8	 mov	 eax, DWORD PTR _dwRealSize$[ebp]
$LN1@read_callb:

; 178  : }

  0006e	c9		 leave
  0006f	c2 0c 00	 ret	 12			; 0000000cH
?read_callback@CSoundData@@CGKKPAXK@Z ENDP		; CSoundData::read_callback
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?seek_callback@CSoundData@@CGJKJK@Z
_TEXT	SEGMENT
_file_handle$ = 8					; size = 4
_offset$ = 12						; size = 4
_type$ = 16						; size = 4
?seek_callback@CSoundData@@CGJKJK@Z PROC		; CSoundData::seek_callback, COMDAT

; 163  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 164  : 	if (!isSlotIndex(file_handle))

  00003	ff 75 08	 push	 DWORD PTR _file_handle$[ebp]
  00006	e8 00 00 00 00	 call	 ?isSlotIndex@CSoundData@@CA_NK@Z ; CSoundData::isSlotIndex
  0000b	59		 pop	 ecx
  0000c	0f b6 c0	 movzx	 eax, al
  0000f	85 c0		 test	 eax, eax
  00011	75 04		 jne	 SHORT $LN2@seek_callb

; 165  : 		return 0;

  00013	33 c0		 xor	 eax, eax
  00015	eb 18		 jmp	 SHORT $LN1@seek_callb
$LN2@seek_callb:

; 166  : 
; 167  : 	return ms_SoundFile[file_handle].Seek(offset, type);

  00017	ff 75 10	 push	 DWORD PTR _type$[ebp]
  0001a	ff 75 0c	 push	 DWORD PTR _offset$[ebp]
  0001d	69 4d 08 44 01
	00 00		 imul	 ecx, DWORD PTR _file_handle$[ebp], 324
  00024	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A ; CSoundData::ms_SoundFile
  0002a	e8 00 00 00 00	 call	 ?Seek@CMappedFile@@QAEHKH@Z ; CMappedFile::Seek
$LN1@seek_callb:

; 168  : }

  0002f	5d		 pop	 ebp
  00030	c2 0c 00	 ret	 12			; 0000000cH
?seek_callback@CSoundData@@CGJKJK@Z ENDP		; CSoundData::seek_callback
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?close_callback@CSoundData@@CGXK@Z
_TEXT	SEGMENT
$T1 = -4						; size = 4
_file_handle$ = 8					; size = 4
?close_callback@CSoundData@@CGXK@Z PROC			; CSoundData::close_callback, COMDAT

; 154  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 155  : 	if (!isSlotIndex(file_handle))

  00004	ff 75 08	 push	 DWORD PTR _file_handle$[ebp]
  00007	e8 00 00 00 00	 call	 ?isSlotIndex@CSoundData@@CA_NK@Z ; CSoundData::isSlotIndex
  0000c	59		 pop	 ecx
  0000d	0f b6 c0	 movzx	 eax, al
  00010	85 c0		 test	 eax, eax
  00012	75 02		 jne	 SHORT $LN2@close_call

; 156  : 		return;

  00014	eb 2f		 jmp	 SHORT $LN3@close_call
$LN2@close_call:

; 157  : 
; 158  : 	ms_SoundFile[file_handle].Destroy();

  00016	69 4d 08 44 01
	00 00		 imul	 ecx, DWORD PTR _file_handle$[ebp], 324
  0001d	81 c1 00 00 00
	00		 add	 ecx, OFFSET ?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A ; CSoundData::ms_SoundFile
  00023	e8 00 00 00 00	 call	 ?Destroy@CMappedFile@@QAEXXZ ; CMappedFile::Destroy

; 159  : 	ms_isSoundFile[file_handle] = false;

  00028	8b 45 08	 mov	 eax, DWORD PTR _file_handle$[ebp]
  0002b	89 45 fc	 mov	 DWORD PTR $T1[ebp], eax
  0002e	83 7d fc 05	 cmp	 DWORD PTR $T1[ebp], 5
  00032	73 02		 jae	 SHORT $LN4@close_call
  00034	eb 05		 jmp	 SHORT $LN5@close_call
$LN4@close_call:
  00036	e8 00 00 00 00	 call	 ___report_rangecheckfailure
$LN5@close_call:
  0003b	8b 45 fc	 mov	 eax, DWORD PTR $T1[ebp]
  0003e	c6 80 00 00 00
	00 00		 mov	 BYTE PTR ?ms_isSoundFile@CSoundData@@0PA_NA[eax], 0
$LN3@close_call:

; 160  : }

  00045	c9		 leave
  00046	c2 04 00	 ret	 4
?close_callback@CSoundData@@CGXK@Z ENDP			; CSoundData::close_callback
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterBase\Singleton.h
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?open_callback@CSoundData@@CGKPBDPAK@Z
_TEXT	SEGMENT
_pMap$ = -12						; size = 4
$T1 = -8						; size = 4
_iIndex$ = -4						; size = 4
_filename$ = 8						; size = 4
_file_handle$ = 12					; size = 4
?open_callback@CSoundData@@CGKPBDPAK@Z PROC		; CSoundData::open_callback, COMDAT

; 136  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH

; 137  : 	int iIndex = GetEmptySlotIndex();

  00006	e8 00 00 00 00	 call	 ?GetEmptySlotIndex@CSoundData@@CAHXZ ; CSoundData::GetEmptySlotIndex
  0000b	89 45 fc	 mov	 DWORD PTR _iIndex$[ebp], eax

; 138  : 
; 139  : 	if (-1 == iIndex)

  0000e	83 7d fc ff	 cmp	 DWORD PTR _iIndex$[ebp], -1
  00012	75 04		 jne	 SHORT $LN2@open_callb

; 140  : 		return 0;

  00014	33 c0		 xor	 eax, eax
  00016	eb 44		 jmp	 SHORT $LN1@open_callb
$LN2@open_callb:
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterBase\Singleton.h

; 27   : 		return (*ms_singleton);

  00018	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ms_singleton@?$CSingleton@VCEterPackManager@@@@0PAVCEterPackManager@@A ; CSingleton<CEterPackManager>::ms_singleton
  0001d	89 45 f8	 mov	 DWORD PTR $T1[ebp], eax
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp

; 144  : 	if (!CEterPackManager::Instance().Get(ms_SoundFile[iIndex], filename, &pMap))

  00020	8d 45 f4	 lea	 eax, DWORD PTR _pMap$[ebp]
  00023	50		 push	 eax
  00024	ff 75 08	 push	 DWORD PTR _filename$[ebp]
  00027	69 45 fc 44 01
	00 00		 imul	 eax, DWORD PTR _iIndex$[ebp], 324
  0002e	05 00 00 00 00	 add	 eax, OFFSET ?ms_SoundFile@CSoundData@@0PAVCMappedFile@@A ; CSoundData::ms_SoundFile
  00033	50		 push	 eax
  00034	8b 4d f8	 mov	 ecx, DWORD PTR $T1[ebp]
  00037	e8 00 00 00 00	 call	 ?Get@CEterPackManager@@QAE_NAAVCMappedFile@@PBDPAPBX@Z ; CEterPackManager::Get
  0003c	0f b6 c0	 movzx	 eax, al
  0003f	85 c0		 test	 eax, eax
  00041	75 04		 jne	 SHORT $LN3@open_callb

; 145  : 		return 0;

  00043	33 c0		 xor	 eax, eax
  00045	eb 15		 jmp	 SHORT $LN1@open_callb
$LN3@open_callb:

; 146  : 
; 147  : 	ms_isSoundFile[iIndex] = true;

  00047	8b 45 fc	 mov	 eax, DWORD PTR _iIndex$[ebp]
  0004a	c6 80 00 00 00
	00 01		 mov	 BYTE PTR ?ms_isSoundFile@CSoundData@@0PA_NA[eax], 1

; 148  : 	
; 149  : 	*file_handle = iIndex;

  00051	8b 45 0c	 mov	 eax, DWORD PTR _file_handle$[ebp]
  00054	8b 4d fc	 mov	 ecx, DWORD PTR _iIndex$[ebp]
  00057	89 08		 mov	 DWORD PTR [eax], ecx

; 150  : 	return 1;

  00059	33 c0		 xor	 eax, eax
  0005b	40		 inc	 eax
$LN1@open_callb:

; 151  : }

  0005c	c9		 leave
  0005d	c2 08 00	 ret	 8
?open_callback@CSoundData@@CGKPBDPAK@Z ENDP		; CSoundData::open_callback
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?Destroy@CSoundData@@IAEXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?Destroy@CSoundData@@IAEXXZ PROC			; CSoundData::Destroy, COMDAT
; _this$ = ecx

; 190  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 191  : 	if (m_data)

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	83 b8 94 00 00
	00 00		 cmp	 DWORD PTR [eax+148], 0
  00011	74 19		 je	 SHORT $LN1@Destroy

; 192  : 	{
; 193  : 		AIL_mem_free_lock(m_data);

  00013	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00016	ff b0 94 00 00
	00		 push	 DWORD PTR [eax+148]
  0001c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_mem_free_lock@4

; 194  : 		m_data = NULL;

  00022	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00025	83 a0 94 00 00
	00 00		 and	 DWORD PTR [eax+148], 0
$LN1@Destroy:

; 195  : 	}
; 196  : }

  0002c	c9		 leave
  0002d	c3		 ret	 0
?Destroy@CSoundData@@IAEXXZ ENDP			; CSoundData::Destroy
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?ReadFromDisk@CSoundData@@IAE_NXZ
_TEXT	SEGMENT
_info$ = -60						; size = 36
_start$ = -24						; size = 8
_type$ = -16						; size = 4
tv76 = -12						; size = 4
_this$ = -8						; size = 4
_s$ = -4						; size = 4
?ReadFromDisk@CSoundData@@IAE_NXZ PROC			; CSoundData::ReadFromDisk, COMDAT
; _this$ = ecx

; 65   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 3c	 sub	 esp, 60			; 0000003cH
  00006	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 66   : 	assert(m_assigned == true);
; 67   : 
; 68   : 	LARGE_INTEGER start;
; 69   : 	QueryPerformanceCounter(&start);

  00009	8d 45 e8	 lea	 eax, DWORD PTR _start$[ebp]
  0000c	50		 push	 eax
  0000d	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__QueryPerformanceCounter@4

; 70   : 
; 71   : 	U32* s = (U32 *) AIL_file_read(m_filename, FILE_READ_WITH_SIZE);

  00013	6a ff		 push	 -1
  00015	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00018	83 c0 04	 add	 eax, 4
  0001b	50		 push	 eax
  0001c	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_file_read@8
  00022	89 45 fc	 mov	 DWORD PTR _s$[ebp], eax

; 72   : 
; 73   : 	if (s == NULL)

  00025	83 7d fc 00	 cmp	 DWORD PTR _s$[ebp], 0
  00029	75 07		 jne	 SHORT $LN4@ReadFromDi

; 74   : 		return false;

  0002b	32 c0		 xor	 al, al
  0002d	e9 e9 00 00 00	 jmp	 $LN1@ReadFromDi
$LN4@ReadFromDi:

; 75   : 
; 76   : 	S32 type = AIL_file_type(s + 1, s[0]);

  00032	6a 04		 push	 4
  00034	58		 pop	 eax
  00035	6b c0 00	 imul	 eax, eax, 0
  00038	8b 4d fc	 mov	 ecx, DWORD PTR _s$[ebp]
  0003b	ff 34 01	 push	 DWORD PTR [ecx+eax]
  0003e	8b 45 fc	 mov	 eax, DWORD PTR _s$[ebp]
  00041	83 c0 04	 add	 eax, 4
  00044	50		 push	 eax
  00045	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_file_type@8
  0004b	89 45 f0	 mov	 DWORD PTR _type$[ebp], eax

; 77   : 	AILSOUNDINFO info;
; 78   : 	
; 79   : 	switch (type)

  0004e	8b 45 f0	 mov	 eax, DWORD PTR _type$[ebp]
  00051	89 45 f4	 mov	 DWORD PTR tv76[ebp], eax
  00054	83 7d f4 01	 cmp	 DWORD PTR tv76[ebp], 1
  00058	74 11		 je	 SHORT $LN5@ReadFromDi
  0005a	83 7d f4 02	 cmp	 DWORD PTR tv76[ebp], 2
  0005e	74 3c		 je	 SHORT $LN6@ReadFromDi
  00060	83 7d f4 0d	 cmp	 DWORD PTR tv76[ebp], 13	; 0000000dH
  00064	74 6e		 je	 SHORT $LN7@ReadFromDi
  00066	e9 a1 00 00 00	 jmp	 $LN8@ReadFromDi
$LN5@ReadFromDi:

; 80   : 	{
; 81   : 		case AILFILETYPE_PCM_WAV:
; 82   : 			{
; 83   : 				m_data = s;

  0006b	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0006e	8b 4d fc	 mov	 ecx, DWORD PTR _s$[ebp]
  00071	89 88 94 00 00
	00		 mov	 DWORD PTR [eax+148], ecx

; 84   : 				m_size = *((S32 *) s);

  00077	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0007a	8b 4d fc	 mov	 ecx, DWORD PTR _s$[ebp]
  0007d	8b 09		 mov	 ecx, DWORD PTR [ecx]
  0007f	89 88 90 00 00
	00		 mov	 DWORD PTR [eax+144], ecx

; 85   : 				m_flag |= FLAG_DATA_SIZE;

  00085	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00088	8b 80 98 00 00
	00		 mov	 eax, DWORD PTR [eax+152]
  0008e	83 c8 01	 or	 eax, 1
  00091	8b 4d f8	 mov	 ecx, DWORD PTR _this$[ebp]
  00094	89 81 98 00 00
	00		 mov	 DWORD PTR [ecx+152], eax

; 86   : 			}
; 87   : 			break;

  0009a	eb 7d		 jmp	 SHORT $LN2@ReadFromDi
$LN6@ReadFromDi:

; 88   : 
; 89   : 		case AILFILETYPE_ADPCM_WAV:	// 3D 사운드는 decompress 해야 함.
; 90   : 			{
; 91   : 				AIL_WAV_info(s + 1, &info);

  0009c	8d 45 c4	 lea	 eax, DWORD PTR _info$[ebp]
  0009f	50		 push	 eax
  000a0	8b 45 fc	 mov	 eax, DWORD PTR _s$[ebp]
  000a3	83 c0 04	 add	 eax, 4
  000a6	50		 push	 eax
  000a7	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_WAV_info@8

; 92   : 				AIL_decompress_ADPCM(&info, &m_data, &m_size);

  000ad	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  000b0	05 90 00 00 00	 add	 eax, 144		; 00000090H
  000b5	50		 push	 eax
  000b6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  000b9	05 94 00 00 00	 add	 eax, 148		; 00000094H
  000be	50		 push	 eax
  000bf	8d 45 c4	 lea	 eax, DWORD PTR _info$[ebp]
  000c2	50		 push	 eax
  000c3	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_decompress_ADPCM@12

; 93   : 				AIL_mem_free_lock(s);

  000c9	ff 75 fc	 push	 DWORD PTR _s$[ebp]
  000cc	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_mem_free_lock@4

; 94   : 			}
; 95   : 			break;

  000d2	eb 45		 jmp	 SHORT $LN2@ReadFromDi
$LN7@ReadFromDi:

; 96   : 
; 97   : 		case AILFILETYPE_MPEG_L3_AUDIO:
; 98   : 			{
; 99   : 				AIL_decompress_ASI(s + 1, *((S32 *) s), m_filename, &m_data, &m_size, 0);

  000d4	6a 00		 push	 0
  000d6	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  000d9	05 90 00 00 00	 add	 eax, 144		; 00000090H
  000de	50		 push	 eax
  000df	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  000e2	05 94 00 00 00	 add	 eax, 148		; 00000094H
  000e7	50		 push	 eax
  000e8	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  000eb	83 c0 04	 add	 eax, 4
  000ee	50		 push	 eax
  000ef	8b 45 fc	 mov	 eax, DWORD PTR _s$[ebp]
  000f2	ff 30		 push	 DWORD PTR [eax]
  000f4	8b 45 fc	 mov	 eax, DWORD PTR _s$[ebp]
  000f7	83 c0 04	 add	 eax, 4
  000fa	50		 push	 eax
  000fb	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_decompress_ASI@24

; 100  : 				AIL_mem_free_lock(s);

  00101	ff 75 fc	 push	 DWORD PTR _s$[ebp]
  00104	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_mem_free_lock@4

; 101  : 			}
; 102  : 			break;

  0010a	eb 0d		 jmp	 SHORT $LN2@ReadFromDi
$LN8@ReadFromDi:

; 103  : 
; 104  : 		default:
; 105  : 			assert(!"Unknown File Type");
; 106  : 			AIL_mem_free_lock(s);

  0010c	ff 75 fc	 push	 DWORD PTR _s$[ebp]
  0010f	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_mem_free_lock@4

; 107  : 			return false;

  00115	32 c0		 xor	 al, al
  00117	eb 02		 jmp	 SHORT $LN1@ReadFromDi
$LN2@ReadFromDi:

; 108  : 	}
; 109  : 
; 110  : 	return true;

  00119	b0 01		 mov	 al, 1
$LN1@ReadFromDi:

; 111  : }

  0011b	c9		 leave
  0011c	c3		 ret	 0
?ReadFromDisk@CSoundData@@IAE_NXZ ENDP			; CSoundData::ReadFromDisk
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?GetPlayTime@CSoundData@@QAEKXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetPlayTime@CSoundData@@QAEKXZ PROC			; CSoundData::GetPlayTime, COMDAT
; _this$ = ecx

; 50   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 51   : 	return m_dwPlayTime;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	8b 80 8c 00 00
	00		 mov	 eax, DWORD PTR [eax+140]

; 52   : }

  00010	c9		 leave
  00011	c3		 ret	 0
?GetPlayTime@CSoundData@@QAEKXZ ENDP			; CSoundData::GetPlayTime
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?SetPlayTime@CSoundData@@QAEXK@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_dwPlayTime$ = 8					; size = 4
?SetPlayTime@CSoundData@@QAEXK@Z PROC			; CSoundData::SetPlayTime, COMDAT
; _this$ = ecx

; 55   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 56   : 	m_dwPlayTime = dwPlayTime;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	8b 4d 08	 mov	 ecx, DWORD PTR _dwPlayTime$[ebp]
  0000d	89 88 8c 00 00
	00		 mov	 DWORD PTR [eax+140], ecx

; 57   : }

  00013	c9		 leave
  00014	c2 04 00	 ret	 4
?SetPlayTime@CSoundData@@QAEXK@Z ENDP			; CSoundData::SetPlayTime
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?GetFileName@CSoundData@@QAEPBDXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetFileName@CSoundData@@QAEPBDXZ PROC			; CSoundData::GetFileName, COMDAT
; _this$ = ecx

; 11   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 12   : 	return m_filename;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	83 c0 04	 add	 eax, 4

; 13   : }

  0000d	c9		 leave
  0000e	c3		 ret	 0
?GetFileName@CSoundData@@QAEPBDXZ ENDP			; CSoundData::GetFileName
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?GetAccessTime@CSoundData@@QAEKXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetAccessTime@CSoundData@@QAEKXZ PROC			; CSoundData::GetAccessTime, COMDAT
; _this$ = ecx

; 60   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 61   : 	return m_dwAccessTime;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	8b 80 88 00 00
	00		 mov	 eax, DWORD PTR [eax+136]

; 62   : }

  00010	c9		 leave
  00011	c3		 ret	 0
?GetAccessTime@CSoundData@@QAEKXZ ENDP			; CSoundData::GetAccessTime
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?Release@CSoundData@@QAEXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?Release@CSoundData@@QAEXXZ PROC			; CSoundData::Release, COMDAT
; _this$ = ecx

; 43   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 44   : 	assert(m_iRefCount != 0);
; 45   : 	--m_iRefCount;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	8b 80 84 00 00
	00		 mov	 eax, DWORD PTR [eax+132]
  00010	48		 dec	 eax
  00011	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00014	89 81 84 00 00
	00		 mov	 DWORD PTR [ecx+132], eax

; 46   : 	m_dwAccessTime = ELTimer_GetMSec();

  0001a	e8 00 00 00 00	 call	 ?ELTimer_GetMSec@@YAKXZ	; ELTimer_GetMSec
  0001f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00022	89 81 88 00 00
	00		 mov	 DWORD PTR [ecx+136], eax

; 47   : }

  00028	c9		 leave
  00029	c3		 ret	 0
?Release@CSoundData@@QAEXXZ ENDP			; CSoundData::Release
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?GetSize@CSoundData@@QAEKXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetSize@CSoundData@@QAEKXZ PROC			; CSoundData::GetSize, COMDAT
; _this$ = ecx

; 38   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 39   : 	return m_size;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	8b 80 90 00 00
	00		 mov	 eax, DWORD PTR [eax+144]

; 40   : }

  00010	c9		 leave
  00011	c3		 ret	 0
?GetSize@CSoundData@@QAEKXZ ENDP			; CSoundData::GetSize
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?Get@CSoundData@@QAEPAXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?Get@CSoundData@@QAEPAXXZ PROC				; CSoundData::Get, COMDAT
; _this$ = ecx

; 24   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 25   : 	++m_iRefCount;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	8b 80 84 00 00
	00		 mov	 eax, DWORD PTR [eax+132]
  00010	40		 inc	 eax
  00011	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00014	89 81 84 00 00
	00		 mov	 DWORD PTR [ecx+132], eax

; 26   : 	m_dwAccessTime = ELTimer_GetMSec(); 

  0001a	e8 00 00 00 00	 call	 ?ELTimer_GetMSec@@YAKXZ	; ELTimer_GetMSec
  0001f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00022	89 81 88 00 00
	00		 mov	 DWORD PTR [ecx+136], eax

; 27   : 
; 28   : 	if (!m_data)

  00028	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002b	83 b8 94 00 00
	00 00		 cmp	 DWORD PTR [eax+148], 0
  00032	75 08		 jne	 SHORT $LN2@Get

; 29   : 		ReadFromDisk();

  00034	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00037	e8 00 00 00 00	 call	 ?ReadFromDisk@CSoundData@@IAE_NXZ ; CSoundData::ReadFromDisk
$LN2@Get:

; 30   : 
; 31   : 	if (m_flag & FLAG_DATA_SIZE)

  0003c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0003f	8b 80 98 00 00
	00		 mov	 eax, DWORD PTR [eax+152]
  00045	83 e0 01	 and	 eax, 1
  00048	74 10		 je	 SHORT $LN3@Get

; 32   : 		return ((S32 *) m_data + 1);

  0004a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0004d	8b 80 94 00 00
	00		 mov	 eax, DWORD PTR [eax+148]
  00053	83 c0 04	 add	 eax, 4
  00056	eb 0b		 jmp	 SHORT $LN1@Get
  00058	eb 09		 jmp	 SHORT $LN1@Get
$LN3@Get:

; 33   : 	else
; 34   : 		return (m_data);

  0005a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0005d	8b 80 94 00 00
	00		 mov	 eax, DWORD PTR [eax+148]
$LN1@Get:

; 35   : }

  00063	c9		 leave
  00064	c3		 ret	 0
?Get@CSoundData@@QAEPAXXZ ENDP				; CSoundData::Get
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?Assign@CSoundData@@QAEXPBD@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_filename$ = 8						; size = 4
?Assign@CSoundData@@QAEXPBD@Z PROC			; CSoundData::Assign, COMDAT
; _this$ = ecx

; 16   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 17   : 	assert(m_assigned == false);
; 18   : 
; 19   : 	strncpy(m_filename, filename, sizeof(m_filename)-1);

  00007	6a 7f		 push	 127			; 0000007fH
  00009	ff 75 08	 push	 DWORD PTR _filename$[ebp]
  0000c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000f	83 c0 04	 add	 eax, 4
  00012	50		 push	 eax
  00013	e8 00 00 00 00	 call	 _strncpy
  00018	83 c4 0c	 add	 esp, 12			; 0000000cH

; 20   : 	m_assigned = true;

  0001b	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001e	c6 80 9c 00 00
	00 01		 mov	 BYTE PTR [eax+156], 1

; 21   : }

  00025	c9		 leave
  00026	c2 04 00	 ret	 4
?Assign@CSoundData@@QAEXPBD@Z ENDP			; CSoundData::Assign
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ??1CSoundData@@UAE@XZ
_TEXT	SEGMENT
_this$ = -16						; size = 4
__$EHRec$ = -12						; size = 12
??1CSoundData@@UAE@XZ PROC				; CSoundData::~CSoundData, COMDAT
; _this$ = ecx

; 210  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	6a ff		 push	 -1
  00005	68 00 00 00 00	 push	 __ehhandler$??1CSoundData@@UAE@XZ
  0000a	64 a1 00 00 00
	00		 mov	 eax, DWORD PTR fs:0
  00010	50		 push	 eax
  00011	51		 push	 ecx
  00012	a1 00 00 00 00	 mov	 eax, DWORD PTR ___security_cookie
  00017	33 c5		 xor	 eax, ebp
  00019	50		 push	 eax
  0001a	8d 45 f4	 lea	 eax, DWORD PTR __$EHRec$[ebp]
  0001d	64 a3 00 00 00
	00		 mov	 DWORD PTR fs:0, eax
  00023	89 4d f0	 mov	 DWORD PTR _this$[ebp], ecx
  00026	8b 45 f0	 mov	 eax, DWORD PTR _this$[ebp]
  00029	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CSoundData@@6B@

; 211  : 	Destroy();

  0002f	8b 4d f0	 mov	 ecx, DWORD PTR _this$[ebp]
  00032	e8 00 00 00 00	 call	 ?Destroy@CSoundData@@IAEXXZ ; CSoundData::Destroy

; 212  : }

  00037	8b 4d f4	 mov	 ecx, DWORD PTR __$EHRec$[ebp]
  0003a	64 89 0d 00 00
	00 00		 mov	 DWORD PTR fs:0, ecx
  00041	59		 pop	 ecx
  00042	c9		 leave
  00043	c3		 ret	 0
  00044	cc		 int	 3
  00045	cc		 int	 3
  00046	cc		 int	 3
  00047	cc		 int	 3
  00048	cc		 int	 3
_TEXT	ENDS
;	COMDAT text$x
text$x	SEGMENT
__ehhandler$??1CSoundData@@UAE@XZ:
  00000	90		 npad	 1
  00001	90		 npad	 1
  00002	8b 54 24 08	 mov	 edx, DWORD PTR [esp+8]
  00006	8d 42 0c	 lea	 eax, DWORD PTR [edx+12]
  00009	8b 4a f8	 mov	 ecx, DWORD PTR [edx-8]
  0000c	33 c8		 xor	 ecx, eax
  0000e	e8 00 00 00 00	 call	 @__security_check_cookie@4
  00013	b8 00 00 00 00	 mov	 eax, OFFSET __ehfuncinfo$??1CSoundData@@UAE@XZ
  00018	e9 00 00 00 00	 jmp	 ___CxxFrameHandler3
text$x	ENDS
??1CSoundData@@UAE@XZ ENDP				; CSoundData::~CSoundData
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ??0CSoundData@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CSoundData@@QAE@XZ PROC				; CSoundData::CSoundData, COMDAT
; _this$ = ecx

; 206  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CSoundData@@6B@

; 200  : m_iRefCount(0),

  00010	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00013	83 a0 84 00 00
	00 00		 and	 DWORD PTR [eax+132], 0

; 202  : m_dwAccessTime(ELTimer_GetMSec()),

  0001a	e8 00 00 00 00	 call	 ?ELTimer_GetMSec@@YAKXZ	; ELTimer_GetMSec
  0001f	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00022	89 81 88 00 00
	00		 mov	 DWORD PTR [ecx+136], eax

; 201  : m_dwPlayTime(0),

  00028	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0002b	83 a0 8c 00 00
	00 00		 and	 DWORD PTR [eax+140], 0

; 203  : m_size(0),

  00032	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00035	83 a0 90 00 00
	00 00		 and	 DWORD PTR [eax+144], 0

; 204  : m_data(NULL),

  0003c	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0003f	83 a0 94 00 00
	00 00		 and	 DWORD PTR [eax+148], 0

; 205  : m_flag(0)

  00046	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00049	83 a0 98 00 00
	00 00		 and	 DWORD PTR [eax+152], 0

; 199  : m_assigned(false),

  00050	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00053	c6 80 9c 00 00
	00 00		 mov	 BYTE PTR [eax+156], 0

; 207  : }

  0005a	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0005d	c9		 leave
  0005e	c3		 ret	 0
??0CSoundData@@QAE@XZ ENDP				; CSoundData::CSoundData
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\MilesLib\SoundData.cpp
;	COMDAT ?SetPackMode@CSoundData@@SAXXZ
_TEXT	SEGMENT
$T1 = -8						; size = 4
_i$2 = -4						; size = 4
?SetPackMode@CSoundData@@SAXXZ PROC			; CSoundData::SetPackMode, COMDAT

; 181  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	51		 push	 ecx

; 182  : 	// if sound data reads from pack file, the callbacks of the MSS should be changed.
; 183  : 	AIL_set_file_callbacks(open_callback, close_callback, seek_callback, read_callback);

  00005	68 00 00 00 00	 push	 OFFSET ?read_callback@CSoundData@@CGKKPAXK@Z ; CSoundData::read_callback
  0000a	68 00 00 00 00	 push	 OFFSET ?seek_callback@CSoundData@@CGJKJK@Z ; CSoundData::seek_callback
  0000f	68 00 00 00 00	 push	 OFFSET ?close_callback@CSoundData@@CGXK@Z ; CSoundData::close_callback
  00014	68 00 00 00 00	 push	 OFFSET ?open_callback@CSoundData@@CGKPBDPAK@Z ; CSoundData::open_callback
  00019	ff 15 00 00 00
	00		 call	 DWORD PTR __imp__AIL_set_file_callbacks@16

; 184  : 
; 185  : 	for (int i = 0; i < SOUND_FILE_MAX_NUM; ++i)

  0001f	83 65 fc 00	 and	 DWORD PTR _i$2[ebp], 0
  00023	eb 07		 jmp	 SHORT $LN4@SetPackMod
$LN2@SetPackMod:
  00025	8b 45 fc	 mov	 eax, DWORD PTR _i$2[ebp]
  00028	40		 inc	 eax
  00029	89 45 fc	 mov	 DWORD PTR _i$2[ebp], eax
$LN4@SetPackMod:
  0002c	83 7d fc 05	 cmp	 DWORD PTR _i$2[ebp], 5
  00030	7d 1f		 jge	 SHORT $LN5@SetPackMod

; 186  : 		ms_isSoundFile[i] = false;

  00032	8b 45 fc	 mov	 eax, DWORD PTR _i$2[ebp]
  00035	89 45 f8	 mov	 DWORD PTR $T1[ebp], eax
  00038	83 7d f8 05	 cmp	 DWORD PTR $T1[ebp], 5
  0003c	73 02		 jae	 SHORT $LN6@SetPackMod
  0003e	eb 05		 jmp	 SHORT $LN7@SetPackMod
$LN6@SetPackMod:
  00040	e8 00 00 00 00	 call	 ___report_rangecheckfailure
$LN7@SetPackMod:
  00045	8b 45 f8	 mov	 eax, DWORD PTR $T1[ebp]
  00048	c6 80 00 00 00
	00 00		 mov	 BYTE PTR ?ms_isSoundFile@CSoundData@@0PA_NA[eax], 0
  0004f	eb d4		 jmp	 SHORT $LN2@SetPackMod
$LN5@SetPackMod:

; 187  : }

  00051	c9		 leave
  00052	c3		 ret	 0
?SetPackMode@CSoundData@@SAXXZ ENDP			; CSoundData::SetPackMode
_TEXT	ENDS
END

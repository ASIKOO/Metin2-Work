; Listing generated by Microsoft (R) Optimizing Compiler Version 19.28.29335.0 

	TITLE	D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??_H@YGXPAXIIP6EPAX0@Z@Z			; `vector constructor iterator'
PUBLIC	?DeformNoSkin@CGrannyModelInstance@@QAEXPBUD3DXMATRIX@@@Z ; CGrannyModelInstance::DeformNoSkin
PUBLIC	?RenderWithOneTexture@CGrannyModelInstance@@QAEXXZ ; CGrannyModelInstance::RenderWithOneTexture
PUBLIC	?RenderWithTwoTexture@CGrannyModelInstance@@QAEXXZ ; CGrannyModelInstance::RenderWithTwoTexture
PUBLIC	?BlendRenderWithOneTexture@CGrannyModelInstance@@QAEXXZ ; CGrannyModelInstance::BlendRenderWithOneTexture
PUBLIC	?BlendRenderWithTwoTexture@CGrannyModelInstance@@QAEXXZ ; CGrannyModelInstance::BlendRenderWithTwoTexture
PUBLIC	?RenderWithoutTexture@CGrannyModelInstance@@QAEXXZ ; CGrannyModelInstance::RenderWithoutTexture
PUBLIC	?RenderMeshNodeListWithOneTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithOneTexture
PUBLIC	?RenderMeshNodeListWithTwoTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithTwoTexture
PUBLIC	?RenderMeshNodeListWithoutTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithoutTexture
PUBLIC	?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
EXTRN	?SetTexture@CStateManager@@QAEXKPAUIDirect3DBaseTexture8@@@Z:PROC ; CStateManager::SetTexture
EXTRN	?SetVertexShader@CStateManager@@QAEXK@Z:PROC	; CStateManager::SetVertexShader
EXTRN	?SetTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z:PROC ; CStateManager::SetTransform
EXTRN	?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z:PROC ; CStateManager::SetStreamSource
EXTRN	?SetIndices@CStateManager@@QAEXPAUIDirect3DIndexBuffer8@@I@Z:PROC ; CStateManager::SetIndices
EXTRN	?DrawIndexedPrimitive@CStateManager@@QAEJW4_D3DPRIMITIVETYPE@@IIII@Z:PROC ; CStateManager::DrawIndexedPrimitive
EXTRN	?ApplyRenderState@CGrannyMaterial@@QAEXXZ:PROC	; CGrannyMaterial::ApplyRenderState
EXTRN	?RestoreRenderState@CGrannyMaterial@@QAEXXZ:PROC ; CGrannyMaterial::RestoreRenderState
EXTRN	?GetD3DTexture@CGrannyMaterial@@QBEPAUIDirect3DTexture8@@H@Z:PROC ; CGrannyMaterial::GetD3DTexture
EXTRN	?GetMaterialRef@CGrannyMaterialPalette@@QAEAAVCGrannyMaterial@@K@Z:PROC ; CGrannyMaterialPalette::GetMaterialRef
EXTRN	?GetVertexCount@CGrannyMesh@@QBEHXZ:PROC	; CGrannyMesh::GetVertexCount
EXTRN	?GetVertexBasePosition@CGrannyMesh@@QBEHXZ:PROC	; CGrannyMesh::GetVertexBasePosition
EXTRN	?GetTriGroupNodeList@CGrannyMesh@@QBEPBUSTriGroupNode@1@W4EType@CGrannyMaterial@@@Z:PROC ; CGrannyMesh::GetTriGroupNodeList
EXTRN	?GetPNTD3DVertexBuffer@CGrannyModel@@QBEPAUIDirect3DVertexBuffer8@@XZ:PROC ; CGrannyModel::GetPNTD3DVertexBuffer
EXTRN	?GetD3DIndexBuffer@CGrannyModel@@QBEPAUIDirect3DIndexBuffer8@@XZ:PROC ; CGrannyModel::GetD3DIndexBuffer
EXTRN	?GetMeshNodeList@CGrannyModel@@QBEPBUSMeshNode@1@W4EType@CGrannyMesh@@W43CGrannyMaterial@@@Z:PROC ; CGrannyModel::GetMeshNodeList
EXTRN	?IsEmpty@CGrannyModelInstance@@QAE_NXZ:PROC	; CGrannyModelInstance::IsEmpty
EXTRN	?__GetDeformableD3DVertexBufferPtr@CGrannyModelInstance@@IAEPAUIDirect3DVertexBuffer8@@XZ:PROC ; CGrannyModelInstance::__GetDeformableD3DVertexBufferPtr
EXTRN	?UpdateWorldPose@CGrannyModelInstance@@IAEXXZ:PROC ; CGrannyModelInstance::UpdateWorldPose
EXTRN	?UpdateWorldMatrices@CGrannyModelInstance@@IAEXPBUD3DXMATRIX@@@Z:PROC ; CGrannyModelInstance::UpdateWorldMatrices
EXTRN	?ms_faceCount@CGraphicBase@@1KA:DWORD		; CGraphicBase::ms_faceCount
EXTRN	?ms_pntVS@CGraphicBase@@1KA:DWORD		; CGraphicBase::ms_pntVS
;	COMDAT ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A
_BSS	SEGMENT
?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A DD 01H DUP (?) ; CSingleton<CStateManager>::ms_singleton
_BSS	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
;	COMDAT ?RenderMeshNodeListWithoutTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z
_TEXT	SEGMENT
_vtxCount$1 = -28					; size = 4
_lpd3dIdxBuf$ = -24					; size = 4
_vtxMeshBasePos$2 = -20					; size = 4
_pMesh$3 = -16						; size = 4
_this$ = -12						; size = 4
_pMeshNode$ = -8					; size = 4
_pTriGroupNode$4 = -4					; size = 4
_eMeshType$ = 8						; size = 4
_eMtrlType$ = 12					; size = 4
?RenderMeshNodeListWithoutTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z PROC ; CGrannyModelInstance::RenderMeshNodeListWithoutTexture, COMDAT
; _this$ = ecx

; 270  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 1c	 sub	 esp, 28			; 0000001cH
  00006	89 4d f4	 mov	 DWORD PTR _this$[ebp], ecx

; 271  : 	assert(m_pModel != NULL);
; 272  : 
; 273  : 	LPDIRECT3DINDEXBUFFER8 lpd3dIdxBuf = m_pModel->GetD3DIndexBuffer();

  00009	8b 45 f4	 mov	 eax, DWORD PTR _this$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	e8 00 00 00 00	 call	 ?GetD3DIndexBuffer@CGrannyModel@@QBEPAUIDirect3DIndexBuffer8@@XZ ; CGrannyModel::GetD3DIndexBuffer
  00014	89 45 e8	 mov	 DWORD PTR _lpd3dIdxBuf$[ebp], eax

; 274  : 	assert(lpd3dIdxBuf != NULL);
; 275  : 
; 276  : 	const CGrannyModel::TMeshNode * pMeshNode = m_pModel->GetMeshNodeList(eMeshType, eMtrlType);

  00017	ff 75 0c	 push	 DWORD PTR _eMtrlType$[ebp]
  0001a	ff 75 08	 push	 DWORD PTR _eMeshType$[ebp]
  0001d	8b 45 f4	 mov	 eax, DWORD PTR _this$[ebp]
  00020	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00023	e8 00 00 00 00	 call	 ?GetMeshNodeList@CGrannyModel@@QBEPBUSMeshNode@1@W4EType@CGrannyMesh@@W43CGrannyMaterial@@@Z ; CGrannyModel::GetMeshNodeList
  00028	89 45 f8	 mov	 DWORD PTR _pMeshNode$[ebp], eax
$LN2@RenderMesh:

; 277  : 
; 278  : 	while (pMeshNode)

  0002b	83 7d f8 00	 cmp	 DWORD PTR _pMeshNode$[ebp], 0
  0002f	0f 84 ab 00 00
	00		 je	 $LN1@RenderMesh

; 279  : 	{
; 280  : 		const CGrannyMesh * pMesh = pMeshNode->pMesh;

  00035	8b 45 f8	 mov	 eax, DWORD PTR _pMeshNode$[ebp]
  00038	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  0003b	89 45 f0	 mov	 DWORD PTR _pMesh$3[ebp], eax

; 281  : 		int vtxMeshBasePos = pMesh->GetVertexBasePosition();

  0003e	8b 4d f0	 mov	 ecx, DWORD PTR _pMesh$3[ebp]
  00041	e8 00 00 00 00	 call	 ?GetVertexBasePosition@CGrannyMesh@@QBEHXZ ; CGrannyMesh::GetVertexBasePosition
  00046	89 45 ec	 mov	 DWORD PTR _vtxMeshBasePos$2[ebp], eax

; 282  : 
; 283  : 		STATEMANAGER.SetIndices(lpd3dIdxBuf, vtxMeshBasePos);

  00049	ff 75 ec	 push	 DWORD PTR _vtxMeshBasePos$2[ebp]
  0004c	ff 75 e8	 push	 DWORD PTR _lpd3dIdxBuf$[ebp]
  0004f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00055	e8 00 00 00 00	 call	 ?SetIndices@CStateManager@@QAEXPAUIDirect3DIndexBuffer8@@I@Z ; CStateManager::SetIndices

; 284  : 		STATEMANAGER.SetTransform(D3DTS_WORLD, &m_meshMatrices[pMeshNode->iMesh]);

  0005a	8b 45 f8	 mov	 eax, DWORD PTR _pMeshNode$[ebp]
  0005d	8b 00		 mov	 eax, DWORD PTR [eax]
  0005f	c1 e0 06	 shl	 eax, 6
  00062	8b 4d f4	 mov	 ecx, DWORD PTR _this$[ebp]
  00065	03 41 14	 add	 eax, DWORD PTR [ecx+20]
  00068	50		 push	 eax
  00069	68 00 01 00 00	 push	 256			; 00000100H
  0006e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00074	e8 00 00 00 00	 call	 ?SetTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z ; CStateManager::SetTransform

; 285  : 
; 286  : 		/////
; 287  : 		const CGrannyMesh::TTriGroupNode* pTriGroupNode = pMesh->GetTriGroupNodeList(eMtrlType);

  00079	ff 75 0c	 push	 DWORD PTR _eMtrlType$[ebp]
  0007c	8b 4d f0	 mov	 ecx, DWORD PTR _pMesh$3[ebp]
  0007f	e8 00 00 00 00	 call	 ?GetTriGroupNodeList@CGrannyMesh@@QBEPBUSTriGroupNode@1@W4EType@CGrannyMaterial@@@Z ; CGrannyMesh::GetTriGroupNodeList
  00084	89 45 fc	 mov	 DWORD PTR _pTriGroupNode$4[ebp], eax

; 288  : 		int vtxCount = pMesh->GetVertexCount();

  00087	8b 4d f0	 mov	 ecx, DWORD PTR _pMesh$3[ebp]
  0008a	e8 00 00 00 00	 call	 ?GetVertexCount@CGrannyMesh@@QBEHXZ ; CGrannyMesh::GetVertexCount
  0008f	89 45 e4	 mov	 DWORD PTR _vtxCount$1[ebp], eax
$LN4@RenderMesh:

; 289  : 
; 290  : 		while (pTriGroupNode)

  00092	83 7d fc 00	 cmp	 DWORD PTR _pTriGroupNode$4[ebp], 0
  00096	74 3a		 je	 SHORT $LN5@RenderMesh

; 291  : 		{
; 292  : 			ms_faceCount += pTriGroupNode->triCount;

  00098	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$4[ebp]
  0009b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_faceCount@CGraphicBase@@1KA ; CGraphicBase::ms_faceCount
  000a1	03 48 08	 add	 ecx, DWORD PTR [eax+8]
  000a4	89 0d 00 00 00
	00		 mov	 DWORD PTR ?ms_faceCount@CGraphicBase@@1KA, ecx ; CGraphicBase::ms_faceCount

; 293  : 			STATEMANAGER.DrawIndexedPrimitive(D3DPT_TRIANGLELIST, 0, vtxCount, pTriGroupNode->idxPos, pTriGroupNode->triCount);

  000aa	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$4[ebp]
  000ad	ff 70 08	 push	 DWORD PTR [eax+8]
  000b0	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$4[ebp]
  000b3	ff 70 04	 push	 DWORD PTR [eax+4]
  000b6	ff 75 e4	 push	 DWORD PTR _vtxCount$1[ebp]
  000b9	6a 00		 push	 0
  000bb	6a 04		 push	 4
  000bd	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  000c3	e8 00 00 00 00	 call	 ?DrawIndexedPrimitive@CStateManager@@QAEJW4_D3DPRIMITIVETYPE@@IIII@Z ; CStateManager::DrawIndexedPrimitive

; 294  : 			pTriGroupNode = pTriGroupNode->pNextTriGroupNode;

  000c8	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$4[ebp]
  000cb	8b 00		 mov	 eax, DWORD PTR [eax]
  000cd	89 45 fc	 mov	 DWORD PTR _pTriGroupNode$4[ebp], eax

; 295  : 		}

  000d0	eb c0		 jmp	 SHORT $LN4@RenderMesh
$LN5@RenderMesh:

; 296  : 		/////
; 297  : 
; 298  : 		pMeshNode = pMeshNode->pNextMeshNode;

  000d2	8b 45 f8	 mov	 eax, DWORD PTR _pMeshNode$[ebp]
  000d5	8b 40 08	 mov	 eax, DWORD PTR [eax+8]
  000d8	89 45 f8	 mov	 DWORD PTR _pMeshNode$[ebp], eax

; 299  : 	}

  000db	e9 4b ff ff ff	 jmp	 $LN2@RenderMesh
$LN1@RenderMesh:

; 300  : }

  000e0	c9		 leave
  000e1	c2 08 00	 ret	 8
?RenderMeshNodeListWithoutTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ENDP ; CGrannyModelInstance::RenderMeshNodeListWithoutTexture
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterBase\Singleton.h
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterBase\Singleton.h
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
;	COMDAT ?RenderMeshNodeListWithTwoTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z
_TEXT	SEGMENT
_vtxCount$1 = -40					; size = 4
$T2 = -36						; size = 4
$T3 = -32						; size = 4
_lpd3dIdxBuf$ = -28					; size = 4
_vtxMeshBasePos$4 = -24					; size = 4
_rkMtrl$5 = -20						; size = 4
_pMesh$6 = -16						; size = 4
_this$ = -12						; size = 4
_pMeshNode$ = -8					; size = 4
_pTriGroupNode$7 = -4					; size = 4
_eMeshType$ = 8						; size = 4
_eMtrlType$ = 12					; size = 4
?RenderMeshNodeListWithTwoTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z PROC ; CGrannyModelInstance::RenderMeshNodeListWithTwoTexture, COMDAT
; _this$ = ecx

; 233  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 28	 sub	 esp, 40			; 00000028H
  00006	89 4d f4	 mov	 DWORD PTR _this$[ebp], ecx

; 234  : 	assert(m_pModel != NULL);
; 235  : 
; 236  : 	LPDIRECT3DINDEXBUFFER8 lpd3dIdxBuf = m_pModel->GetD3DIndexBuffer();

  00009	8b 45 f4	 mov	 eax, DWORD PTR _this$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	e8 00 00 00 00	 call	 ?GetD3DIndexBuffer@CGrannyModel@@QBEPAUIDirect3DIndexBuffer8@@XZ ; CGrannyModel::GetD3DIndexBuffer
  00014	89 45 e4	 mov	 DWORD PTR _lpd3dIdxBuf$[ebp], eax

; 237  : 	assert(lpd3dIdxBuf != NULL);
; 238  : 
; 239  : 	const CGrannyModel::TMeshNode * pMeshNode = m_pModel->GetMeshNodeList(eMeshType, eMtrlType);

  00017	ff 75 0c	 push	 DWORD PTR _eMtrlType$[ebp]
  0001a	ff 75 08	 push	 DWORD PTR _eMeshType$[ebp]
  0001d	8b 45 f4	 mov	 eax, DWORD PTR _this$[ebp]
  00020	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00023	e8 00 00 00 00	 call	 ?GetMeshNodeList@CGrannyModel@@QBEPBUSMeshNode@1@W4EType@CGrannyMesh@@W43CGrannyMaterial@@@Z ; CGrannyModel::GetMeshNodeList
  00028	89 45 f8	 mov	 DWORD PTR _pMeshNode$[ebp], eax
$LN2@RenderMesh:

; 240  : 
; 241  : 	while (pMeshNode)

  0002b	83 7d f8 00	 cmp	 DWORD PTR _pMeshNode$[ebp], 0
  0002f	0f 84 00 01 00
	00		 je	 $LN1@RenderMesh

; 242  : 	{
; 243  : 		const CGrannyMesh * pMesh = pMeshNode->pMesh;

  00035	8b 45 f8	 mov	 eax, DWORD PTR _pMeshNode$[ebp]
  00038	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  0003b	89 45 f0	 mov	 DWORD PTR _pMesh$6[ebp], eax

; 244  : 		int vtxMeshBasePos = pMesh->GetVertexBasePosition();

  0003e	8b 4d f0	 mov	 ecx, DWORD PTR _pMesh$6[ebp]
  00041	e8 00 00 00 00	 call	 ?GetVertexBasePosition@CGrannyMesh@@QBEHXZ ; CGrannyMesh::GetVertexBasePosition
  00046	89 45 e8	 mov	 DWORD PTR _vtxMeshBasePos$4[ebp], eax

; 245  : 
; 246  : 		STATEMANAGER.SetIndices(lpd3dIdxBuf, vtxMeshBasePos);

  00049	ff 75 e8	 push	 DWORD PTR _vtxMeshBasePos$4[ebp]
  0004c	ff 75 e4	 push	 DWORD PTR _lpd3dIdxBuf$[ebp]
  0004f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00055	e8 00 00 00 00	 call	 ?SetIndices@CStateManager@@QAEXPAUIDirect3DIndexBuffer8@@I@Z ; CStateManager::SetIndices

; 247  : 		STATEMANAGER.SetTransform(D3DTS_WORLD, &m_meshMatrices[pMeshNode->iMesh]);

  0005a	8b 45 f8	 mov	 eax, DWORD PTR _pMeshNode$[ebp]
  0005d	8b 00		 mov	 eax, DWORD PTR [eax]
  0005f	c1 e0 06	 shl	 eax, 6
  00062	8b 4d f4	 mov	 ecx, DWORD PTR _this$[ebp]
  00065	03 41 14	 add	 eax, DWORD PTR [ecx+20]
  00068	50		 push	 eax
  00069	68 00 01 00 00	 push	 256			; 00000100H
  0006e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00074	e8 00 00 00 00	 call	 ?SetTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z ; CStateManager::SetTransform

; 248  : 
; 249  : 		/////
; 250  : 		const CGrannyMesh::TTriGroupNode* pTriGroupNode = pMesh->GetTriGroupNodeList(eMtrlType);

  00079	ff 75 0c	 push	 DWORD PTR _eMtrlType$[ebp]
  0007c	8b 4d f0	 mov	 ecx, DWORD PTR _pMesh$6[ebp]
  0007f	e8 00 00 00 00	 call	 ?GetTriGroupNodeList@CGrannyMesh@@QBEPBUSTriGroupNode@1@W4EType@CGrannyMaterial@@@Z ; CGrannyMesh::GetTriGroupNodeList
  00084	89 45 fc	 mov	 DWORD PTR _pTriGroupNode$7[ebp], eax

; 251  : 		int vtxCount = pMesh->GetVertexCount();

  00087	8b 4d f0	 mov	 ecx, DWORD PTR _pMesh$6[ebp]
  0008a	e8 00 00 00 00	 call	 ?GetVertexCount@CGrannyMesh@@QBEHXZ ; CGrannyMesh::GetVertexCount
  0008f	89 45 d8	 mov	 DWORD PTR _vtxCount$1[ebp], eax
$LN4@RenderMesh:

; 252  : 		while (pTriGroupNode)

  00092	83 7d fc 00	 cmp	 DWORD PTR _pTriGroupNode$7[ebp], 0
  00096	0f 84 8b 00 00
	00		 je	 $LN5@RenderMesh

; 253  : 		{
; 254  : 			ms_faceCount += pTriGroupNode->triCount;

  0009c	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$7[ebp]
  0009f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_faceCount@CGraphicBase@@1KA ; CGraphicBase::ms_faceCount
  000a5	03 48 08	 add	 ecx, DWORD PTR [eax+8]
  000a8	89 0d 00 00 00
	00		 mov	 DWORD PTR ?ms_faceCount@CGraphicBase@@1KA, ecx ; CGraphicBase::ms_faceCount

; 255  : 
; 256  : 			const CGrannyMaterial& rkMtrl=m_kMtrlPal.GetMaterialRef(pTriGroupNode->mtrlIndex);

  000ae	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$7[ebp]
  000b1	ff 70 0c	 push	 DWORD PTR [eax+12]
  000b4	8b 4d f4	 mov	 ecx, DWORD PTR _this$[ebp]
  000b7	83 c1 2c	 add	 ecx, 44			; 0000002cH
  000ba	e8 00 00 00 00	 call	 ?GetMaterialRef@CGrannyMaterialPalette@@QAEAAVCGrannyMaterial@@K@Z ; CGrannyMaterialPalette::GetMaterialRef
  000bf	89 45 ec	 mov	 DWORD PTR _rkMtrl$5[ebp], eax
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterBase\Singleton.h

; 27   : 		return (*ms_singleton);

  000c2	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  000c7	89 45 e0	 mov	 DWORD PTR $T3[ebp], eax
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp

; 257  : 			STATEMANAGER.SetTexture(0, rkMtrl.GetD3DTexture(0));

  000ca	6a 00		 push	 0
  000cc	8b 4d ec	 mov	 ecx, DWORD PTR _rkMtrl$5[ebp]
  000cf	e8 00 00 00 00	 call	 ?GetD3DTexture@CGrannyMaterial@@QBEPAUIDirect3DTexture8@@H@Z ; CGrannyMaterial::GetD3DTexture
  000d4	50		 push	 eax
  000d5	6a 00		 push	 0
  000d7	8b 4d e0	 mov	 ecx, DWORD PTR $T3[ebp]
  000da	e8 00 00 00 00	 call	 ?SetTexture@CStateManager@@QAEXKPAUIDirect3DBaseTexture8@@@Z ; CStateManager::SetTexture
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterBase\Singleton.h

; 27   : 		return (*ms_singleton);

  000df	a1 00 00 00 00	 mov	 eax, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  000e4	89 45 dc	 mov	 DWORD PTR $T2[ebp], eax
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp

; 258  : 			STATEMANAGER.SetTexture(1, rkMtrl.GetD3DTexture(1));

  000e7	6a 01		 push	 1
  000e9	8b 4d ec	 mov	 ecx, DWORD PTR _rkMtrl$5[ebp]
  000ec	e8 00 00 00 00	 call	 ?GetD3DTexture@CGrannyMaterial@@QBEPAUIDirect3DTexture8@@H@Z ; CGrannyMaterial::GetD3DTexture
  000f1	50		 push	 eax
  000f2	6a 01		 push	 1
  000f4	8b 4d dc	 mov	 ecx, DWORD PTR $T2[ebp]
  000f7	e8 00 00 00 00	 call	 ?SetTexture@CStateManager@@QAEXKPAUIDirect3DBaseTexture8@@@Z ; CStateManager::SetTexture

; 259  : 			STATEMANAGER.DrawIndexedPrimitive(D3DPT_TRIANGLELIST, 0, vtxCount, pTriGroupNode->idxPos, pTriGroupNode->triCount);

  000fc	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$7[ebp]
  000ff	ff 70 08	 push	 DWORD PTR [eax+8]
  00102	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$7[ebp]
  00105	ff 70 04	 push	 DWORD PTR [eax+4]
  00108	ff 75 d8	 push	 DWORD PTR _vtxCount$1[ebp]
  0010b	6a 00		 push	 0
  0010d	6a 04		 push	 4
  0010f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00115	e8 00 00 00 00	 call	 ?DrawIndexedPrimitive@CStateManager@@QAEJW4_D3DPRIMITIVETYPE@@IIII@Z ; CStateManager::DrawIndexedPrimitive

; 260  : 			pTriGroupNode = pTriGroupNode->pNextTriGroupNode;

  0011a	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$7[ebp]
  0011d	8b 00		 mov	 eax, DWORD PTR [eax]
  0011f	89 45 fc	 mov	 DWORD PTR _pTriGroupNode$7[ebp], eax

; 261  : 		}

  00122	e9 6b ff ff ff	 jmp	 $LN4@RenderMesh
$LN5@RenderMesh:

; 262  : 		/////
; 263  : 
; 264  : 		pMeshNode = pMeshNode->pNextMeshNode;

  00127	8b 45 f8	 mov	 eax, DWORD PTR _pMeshNode$[ebp]
  0012a	8b 40 08	 mov	 eax, DWORD PTR [eax+8]
  0012d	89 45 f8	 mov	 DWORD PTR _pMeshNode$[ebp], eax

; 265  : 	}

  00130	e9 f6 fe ff ff	 jmp	 $LN2@RenderMesh
$LN1@RenderMesh:

; 266  : }

  00135	c9		 leave
  00136	c2 08 00	 ret	 8
?RenderMeshNodeListWithTwoTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ENDP ; CGrannyModelInstance::RenderMeshNodeListWithTwoTexture
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
;	COMDAT ?RenderMeshNodeListWithOneTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z
_TEXT	SEGMENT
_vtxCount$1 = -32					; size = 4
_lpd3dIdxBuf$ = -28					; size = 4
_vtxMeshBasePos$2 = -24					; size = 4
_rkMtrl$3 = -20						; size = 4
_pMesh$4 = -16						; size = 4
_this$ = -12						; size = 4
_pMeshNode$ = -8					; size = 4
_pTriGroupNode$5 = -4					; size = 4
_eMeshType$ = 8						; size = 4
_eMtrlType$ = 12					; size = 4
?RenderMeshNodeListWithOneTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z PROC ; CGrannyModelInstance::RenderMeshNodeListWithOneTexture, COMDAT
; _this$ = ecx

; 195  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 20	 sub	 esp, 32			; 00000020H
  00006	89 4d f4	 mov	 DWORD PTR _this$[ebp], ecx

; 196  : 	assert(m_pModel != NULL);
; 197  : 
; 198  : 	LPDIRECT3DINDEXBUFFER8 lpd3dIdxBuf = m_pModel->GetD3DIndexBuffer();

  00009	8b 45 f4	 mov	 eax, DWORD PTR _this$[ebp]
  0000c	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0000f	e8 00 00 00 00	 call	 ?GetD3DIndexBuffer@CGrannyModel@@QBEPAUIDirect3DIndexBuffer8@@XZ ; CGrannyModel::GetD3DIndexBuffer
  00014	89 45 e4	 mov	 DWORD PTR _lpd3dIdxBuf$[ebp], eax

; 199  : 	assert(lpd3dIdxBuf != NULL);
; 200  : 
; 201  : 	const CGrannyModel::TMeshNode * pMeshNode = m_pModel->GetMeshNodeList(eMeshType, eMtrlType);

  00017	ff 75 0c	 push	 DWORD PTR _eMtrlType$[ebp]
  0001a	ff 75 08	 push	 DWORD PTR _eMeshType$[ebp]
  0001d	8b 45 f4	 mov	 eax, DWORD PTR _this$[ebp]
  00020	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  00023	e8 00 00 00 00	 call	 ?GetMeshNodeList@CGrannyModel@@QBEPBUSMeshNode@1@W4EType@CGrannyMesh@@W43CGrannyMaterial@@@Z ; CGrannyModel::GetMeshNodeList
  00028	89 45 f8	 mov	 DWORD PTR _pMeshNode$[ebp], eax
$LN2@RenderMesh:

; 202  : 
; 203  : 	while (pMeshNode)

  0002b	83 7d f8 00	 cmp	 DWORD PTR _pMeshNode$[ebp], 0
  0002f	0f 84 cf 00 00
	00		 je	 $LN1@RenderMesh

; 204  : 	{
; 205  : 		const CGrannyMesh * pMesh = pMeshNode->pMesh;

  00035	8b 45 f8	 mov	 eax, DWORD PTR _pMeshNode$[ebp]
  00038	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  0003b	89 45 f0	 mov	 DWORD PTR _pMesh$4[ebp], eax

; 206  : 		int vtxMeshBasePos = pMesh->GetVertexBasePosition();

  0003e	8b 4d f0	 mov	 ecx, DWORD PTR _pMesh$4[ebp]
  00041	e8 00 00 00 00	 call	 ?GetVertexBasePosition@CGrannyMesh@@QBEHXZ ; CGrannyMesh::GetVertexBasePosition
  00046	89 45 e8	 mov	 DWORD PTR _vtxMeshBasePos$2[ebp], eax

; 207  : 
; 208  : 		STATEMANAGER.SetIndices(lpd3dIdxBuf, vtxMeshBasePos);

  00049	ff 75 e8	 push	 DWORD PTR _vtxMeshBasePos$2[ebp]
  0004c	ff 75 e4	 push	 DWORD PTR _lpd3dIdxBuf$[ebp]
  0004f	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00055	e8 00 00 00 00	 call	 ?SetIndices@CStateManager@@QAEXPAUIDirect3DIndexBuffer8@@I@Z ; CStateManager::SetIndices

; 209  : 		STATEMANAGER.SetTransform(D3DTS_WORLD, &m_meshMatrices[pMeshNode->iMesh]);

  0005a	8b 45 f8	 mov	 eax, DWORD PTR _pMeshNode$[ebp]
  0005d	8b 00		 mov	 eax, DWORD PTR [eax]
  0005f	c1 e0 06	 shl	 eax, 6
  00062	8b 4d f4	 mov	 ecx, DWORD PTR _this$[ebp]
  00065	03 41 14	 add	 eax, DWORD PTR [ecx+20]
  00068	50		 push	 eax
  00069	68 00 01 00 00	 push	 256			; 00000100H
  0006e	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00074	e8 00 00 00 00	 call	 ?SetTransform@CStateManager@@QAEXW4_D3DTRANSFORMSTATETYPE@@PBU_D3DMATRIX@@@Z ; CStateManager::SetTransform

; 210  : 
; 211  : 		/////
; 212  : 		const CGrannyMesh::TTriGroupNode* pTriGroupNode = pMesh->GetTriGroupNodeList(eMtrlType);

  00079	ff 75 0c	 push	 DWORD PTR _eMtrlType$[ebp]
  0007c	8b 4d f0	 mov	 ecx, DWORD PTR _pMesh$4[ebp]
  0007f	e8 00 00 00 00	 call	 ?GetTriGroupNodeList@CGrannyMesh@@QBEPBUSTriGroupNode@1@W4EType@CGrannyMaterial@@@Z ; CGrannyMesh::GetTriGroupNodeList
  00084	89 45 fc	 mov	 DWORD PTR _pTriGroupNode$5[ebp], eax

; 213  : 		int vtxCount = pMesh->GetVertexCount();

  00087	8b 4d f0	 mov	 ecx, DWORD PTR _pMesh$4[ebp]
  0008a	e8 00 00 00 00	 call	 ?GetVertexCount@CGrannyMesh@@QBEHXZ ; CGrannyMesh::GetVertexCount
  0008f	89 45 e0	 mov	 DWORD PTR _vtxCount$1[ebp], eax
$LN4@RenderMesh:

; 214  : 		while (pTriGroupNode)

  00092	83 7d fc 00	 cmp	 DWORD PTR _pTriGroupNode$5[ebp], 0
  00096	74 5e		 je	 SHORT $LN5@RenderMesh

; 215  : 		{
; 216  : 			ms_faceCount += pTriGroupNode->triCount;

  00098	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$5[ebp]
  0009b	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_faceCount@CGraphicBase@@1KA ; CGraphicBase::ms_faceCount
  000a1	03 48 08	 add	 ecx, DWORD PTR [eax+8]
  000a4	89 0d 00 00 00
	00		 mov	 DWORD PTR ?ms_faceCount@CGraphicBase@@1KA, ecx ; CGraphicBase::ms_faceCount

; 217  : 
; 218  : 			CGrannyMaterial& rkMtrl=m_kMtrlPal.GetMaterialRef(pTriGroupNode->mtrlIndex);

  000aa	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$5[ebp]
  000ad	ff 70 0c	 push	 DWORD PTR [eax+12]
  000b0	8b 4d f4	 mov	 ecx, DWORD PTR _this$[ebp]
  000b3	83 c1 2c	 add	 ecx, 44			; 0000002cH
  000b6	e8 00 00 00 00	 call	 ?GetMaterialRef@CGrannyMaterialPalette@@QAEAAVCGrannyMaterial@@K@Z ; CGrannyMaterialPalette::GetMaterialRef
  000bb	89 45 ec	 mov	 DWORD PTR _rkMtrl$3[ebp], eax

; 219  : 			rkMtrl.ApplyRenderState();

  000be	8b 4d ec	 mov	 ecx, DWORD PTR _rkMtrl$3[ebp]
  000c1	e8 00 00 00 00	 call	 ?ApplyRenderState@CGrannyMaterial@@QAEXXZ ; CGrannyMaterial::ApplyRenderState

; 220  : 			STATEMANAGER.DrawIndexedPrimitive(D3DPT_TRIANGLELIST, 0, vtxCount, pTriGroupNode->idxPos, pTriGroupNode->triCount);

  000c6	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$5[ebp]
  000c9	ff 70 08	 push	 DWORD PTR [eax+8]
  000cc	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$5[ebp]
  000cf	ff 70 04	 push	 DWORD PTR [eax+4]
  000d2	ff 75 e0	 push	 DWORD PTR _vtxCount$1[ebp]
  000d5	6a 00		 push	 0
  000d7	6a 04		 push	 4
  000d9	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  000df	e8 00 00 00 00	 call	 ?DrawIndexedPrimitive@CStateManager@@QAEJW4_D3DPRIMITIVETYPE@@IIII@Z ; CStateManager::DrawIndexedPrimitive

; 221  : 			rkMtrl.RestoreRenderState();

  000e4	8b 4d ec	 mov	 ecx, DWORD PTR _rkMtrl$3[ebp]
  000e7	e8 00 00 00 00	 call	 ?RestoreRenderState@CGrannyMaterial@@QAEXXZ ; CGrannyMaterial::RestoreRenderState

; 222  : 			
; 223  : 			pTriGroupNode = pTriGroupNode->pNextTriGroupNode;

  000ec	8b 45 fc	 mov	 eax, DWORD PTR _pTriGroupNode$5[ebp]
  000ef	8b 00		 mov	 eax, DWORD PTR [eax]
  000f1	89 45 fc	 mov	 DWORD PTR _pTriGroupNode$5[ebp], eax

; 224  : 		}

  000f4	eb 9c		 jmp	 SHORT $LN4@RenderMesh
$LN5@RenderMesh:

; 225  : 		/////
; 226  : 
; 227  : 		pMeshNode = pMeshNode->pNextMeshNode;

  000f6	8b 45 f8	 mov	 eax, DWORD PTR _pMeshNode$[ebp]
  000f9	8b 40 08	 mov	 eax, DWORD PTR [eax+8]
  000fc	89 45 f8	 mov	 DWORD PTR _pMeshNode$[ebp], eax

; 228  : 	}

  000ff	e9 27 ff ff ff	 jmp	 $LN2@RenderMesh
$LN1@RenderMesh:

; 229  : }

  00104	c9		 leave
  00105	c2 08 00	 ret	 8
?RenderMeshNodeListWithOneTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ENDP ; CGrannyModelInstance::RenderMeshNodeListWithOneTexture
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
;	COMDAT ?RenderWithoutTexture@CGrannyModelInstance@@QAEXXZ
_TEXT	SEGMENT
_lpd3dRigidPNTVtxBuf$ = -12				; size = 4
_lpd3dDeformPNTVtxBuf$ = -8				; size = 4
_this$ = -4						; size = 4
?RenderWithoutTexture@CGrannyModelInstance@@QAEXXZ PROC	; CGrannyModelInstance::RenderWithoutTexture, COMDAT
; _this$ = ecx

; 158  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 159  : 	if (IsEmpty())

  00009	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000c	e8 00 00 00 00	 call	 ?IsEmpty@CGrannyModelInstance@@QAE_NXZ ; CGrannyModelInstance::IsEmpty
  00011	0f b6 c0	 movzx	 eax, al
  00014	85 c0		 test	 eax, eax
  00016	74 05		 je	 SHORT $LN6@RenderWith

; 160  : 		return;

  00018	e9 a8 00 00 00	 jmp	 $LN1@RenderWith
$LN6@RenderWith:

; 161  : 
; 162  : 	STATEMANAGER.SetVertexShader(ms_pntVS);

  0001d	ff 35 00 00 00
	00		 push	 DWORD PTR ?ms_pntVS@CGraphicBase@@1KA ; CGraphicBase::ms_pntVS
  00023	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00029	e8 00 00 00 00	 call	 ?SetVertexShader@CStateManager@@QAEXK@Z ; CStateManager::SetVertexShader

; 163  : 	STATEMANAGER.SetTexture(0, NULL);

  0002e	6a 00		 push	 0
  00030	6a 00		 push	 0
  00032	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00038	e8 00 00 00 00	 call	 ?SetTexture@CStateManager@@QAEXKPAUIDirect3DBaseTexture8@@@Z ; CStateManager::SetTexture

; 164  : 	STATEMANAGER.SetTexture(1, NULL);

  0003d	6a 00		 push	 0
  0003f	6a 01		 push	 1
  00041	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00047	e8 00 00 00 00	 call	 ?SetTexture@CStateManager@@QAEXKPAUIDirect3DBaseTexture8@@@Z ; CStateManager::SetTexture

; 165  : 
; 166  : 	// WORK
; 167  : 	LPDIRECT3DVERTEXBUFFER8 lpd3dDeformPNTVtxBuf = __GetDeformableD3DVertexBufferPtr();

  0004c	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0004f	e8 00 00 00 00	 call	 ?__GetDeformableD3DVertexBufferPtr@CGrannyModelInstance@@IAEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModelInstance::__GetDeformableD3DVertexBufferPtr
  00054	89 45 f8	 mov	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], eax

; 168  : 	// END_OF_WORK
; 169  : 	LPDIRECT3DVERTEXBUFFER8 lpd3dRigidPNTVtxBuf = m_pModel->GetPNTD3DVertexBuffer();

  00057	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0005a	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0005d	e8 00 00 00 00	 call	 ?GetPNTD3DVertexBuffer@CGrannyModel@@QBEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModel::GetPNTD3DVertexBuffer
  00062	89 45 f4	 mov	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], eax

; 170  : 
; 171  : 	if (lpd3dDeformPNTVtxBuf)

  00065	83 7d f8 00	 cmp	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], 0
  00069	74 2a		 je	 SHORT $LN3@RenderWith

; 172  : 	{
; 173  : 		STATEMANAGER.SetStreamSource(0, lpd3dDeformPNTVtxBuf, sizeof(TPNTVertex));

  0006b	6a 20		 push	 32			; 00000020H
  0006d	ff 75 f8	 push	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp]
  00070	6a 00		 push	 0
  00072	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00078	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 174  : 		RenderMeshNodeListWithoutTexture(CGrannyMesh::TYPE_DEFORM, CGrannyMaterial::TYPE_DIFFUSE_PNT);

  0007d	6a 00		 push	 0
  0007f	6a 01		 push	 1
  00081	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00084	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithoutTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithoutTexture

; 175  : 		RenderMeshNodeListWithoutTexture(CGrannyMesh::TYPE_DEFORM, CGrannyMaterial::TYPE_BLEND_PNT);

  00089	6a 01		 push	 1
  0008b	6a 01		 push	 1
  0008d	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00090	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithoutTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithoutTexture
$LN3@RenderWith:

; 176  : 	}
; 177  : 
; 178  : 	if (lpd3dRigidPNTVtxBuf)

  00095	83 7d f4 00	 cmp	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], 0
  00099	74 2a		 je	 SHORT $LN1@RenderWith

; 179  : 	{
; 180  : 		STATEMANAGER.SetStreamSource(0, lpd3dRigidPNTVtxBuf, sizeof(TPNTVertex));

  0009b	6a 20		 push	 32			; 00000020H
  0009d	ff 75 f4	 push	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp]
  000a0	6a 00		 push	 0
  000a2	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  000a8	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 181  : 		RenderMeshNodeListWithoutTexture(CGrannyMesh::TYPE_RIGID, CGrannyMaterial::TYPE_DIFFUSE_PNT);

  000ad	6a 00		 push	 0
  000af	6a 00		 push	 0
  000b1	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000b4	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithoutTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithoutTexture

; 182  : 		RenderMeshNodeListWithoutTexture(CGrannyMesh::TYPE_RIGID, CGrannyMaterial::TYPE_BLEND_PNT);

  000b9	6a 01		 push	 1
  000bb	6a 00		 push	 0
  000bd	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  000c0	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithoutTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithoutTexture
$LN1@RenderWith:

; 183  : 	}
; 184  : }

  000c5	c9		 leave
  000c6	c3		 ret	 0
?RenderWithoutTexture@CGrannyModelInstance@@QAEXXZ ENDP	; CGrannyModelInstance::RenderWithoutTexture
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
;	COMDAT ?BlendRenderWithTwoTexture@CGrannyModelInstance@@QAEXXZ
_TEXT	SEGMENT
_lpd3dRigidPNTVtxBuf$ = -12				; size = 4
_lpd3dDeformPNTVtxBuf$ = -8				; size = 4
_this$ = -4						; size = 4
?BlendRenderWithTwoTexture@CGrannyModelInstance@@QAEXXZ PROC ; CGrannyModelInstance::BlendRenderWithTwoTexture, COMDAT
; _this$ = ecx

; 133  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 134  : 	if (IsEmpty())

  00009	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000c	e8 00 00 00 00	 call	 ?IsEmpty@CGrannyModelInstance@@QAE_NXZ ; CGrannyModelInstance::IsEmpty
  00011	0f b6 c0	 movzx	 eax, al
  00014	85 c0		 test	 eax, eax
  00016	74 02		 je	 SHORT $LN2@BlendRende

; 135  : 		return;

  00018	eb 72		 jmp	 SHORT $LN1@BlendRende
$LN2@BlendRende:

; 136  : 
; 137  : 	// WORK
; 138  : 	LPDIRECT3DVERTEXBUFFER8 lpd3dDeformPNTVtxBuf = __GetDeformableD3DVertexBufferPtr();

  0001a	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0001d	e8 00 00 00 00	 call	 ?__GetDeformableD3DVertexBufferPtr@CGrannyModelInstance@@IAEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModelInstance::__GetDeformableD3DVertexBufferPtr
  00022	89 45 f8	 mov	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], eax

; 139  : 	// END_OF_WORK
; 140  : 	LPDIRECT3DVERTEXBUFFER8 lpd3dRigidPNTVtxBuf = m_pModel->GetPNTD3DVertexBuffer();

  00025	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00028	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0002b	e8 00 00 00 00	 call	 ?GetPNTD3DVertexBuffer@CGrannyModel@@QBEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModel::GetPNTD3DVertexBuffer
  00030	89 45 f4	 mov	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], eax

; 141  : 
; 142  :  	STATEMANAGER.SetVertexShader(ms_pntVS);

  00033	ff 35 00 00 00
	00		 push	 DWORD PTR ?ms_pntVS@CGraphicBase@@1KA ; CGraphicBase::ms_pntVS
  00039	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0003f	e8 00 00 00 00	 call	 ?SetVertexShader@CStateManager@@QAEXK@Z ; CStateManager::SetVertexShader

; 143  : 
; 144  : 	if (lpd3dDeformPNTVtxBuf)

  00044	83 7d f8 00	 cmp	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], 0
  00048	74 1e		 je	 SHORT $LN3@BlendRende

; 145  : 	{
; 146  : 		STATEMANAGER.SetStreamSource(0, lpd3dDeformPNTVtxBuf, sizeof(TPNTVertex));

  0004a	6a 20		 push	 32			; 00000020H
  0004c	ff 75 f8	 push	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp]
  0004f	6a 00		 push	 0
  00051	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00057	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 147  : 		RenderMeshNodeListWithTwoTexture(CGrannyMesh::TYPE_DEFORM, CGrannyMaterial::TYPE_BLEND_PNT);

  0005c	6a 01		 push	 1
  0005e	6a 01		 push	 1
  00060	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00063	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithTwoTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithTwoTexture
$LN3@BlendRende:

; 148  : 	}
; 149  : 
; 150  : 	if (lpd3dRigidPNTVtxBuf)

  00068	83 7d f4 00	 cmp	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], 0
  0006c	74 1e		 je	 SHORT $LN1@BlendRende

; 151  : 	{
; 152  : 		STATEMANAGER.SetStreamSource(0, lpd3dRigidPNTVtxBuf, sizeof(TPNTVertex));

  0006e	6a 20		 push	 32			; 00000020H
  00070	ff 75 f4	 push	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp]
  00073	6a 00		 push	 0
  00075	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0007b	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 153  : 		RenderMeshNodeListWithTwoTexture(CGrannyMesh::TYPE_RIGID, CGrannyMaterial::TYPE_BLEND_PNT);

  00080	6a 01		 push	 1
  00082	6a 00		 push	 0
  00084	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00087	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithTwoTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithTwoTexture
$LN1@BlendRende:

; 154  : 	}
; 155  : }

  0008c	c9		 leave
  0008d	c3		 ret	 0
?BlendRenderWithTwoTexture@CGrannyModelInstance@@QAEXXZ ENDP ; CGrannyModelInstance::BlendRenderWithTwoTexture
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
;	COMDAT ?BlendRenderWithOneTexture@CGrannyModelInstance@@QAEXXZ
_TEXT	SEGMENT
_lpd3dRigidPNTVtxBuf$ = -12				; size = 4
_lpd3dDeformPNTVtxBuf$ = -8				; size = 4
_this$ = -4						; size = 4
?BlendRenderWithOneTexture@CGrannyModelInstance@@QAEXXZ PROC ; CGrannyModelInstance::BlendRenderWithOneTexture, COMDAT
; _this$ = ecx

; 82   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 83   : 	if (IsEmpty())

  00009	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000c	e8 00 00 00 00	 call	 ?IsEmpty@CGrannyModelInstance@@QAE_NXZ ; CGrannyModelInstance::IsEmpty
  00011	0f b6 c0	 movzx	 eax, al
  00014	85 c0		 test	 eax, eax
  00016	74 02		 je	 SHORT $LN2@BlendRende

; 84   : 		return;

  00018	eb 72		 jmp	 SHORT $LN1@BlendRende
$LN2@BlendRende:

; 85   : 
; 86   : 	// WORK
; 87   : 	LPDIRECT3DVERTEXBUFFER8 lpd3dDeformPNTVtxBuf = __GetDeformableD3DVertexBufferPtr();

  0001a	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0001d	e8 00 00 00 00	 call	 ?__GetDeformableD3DVertexBufferPtr@CGrannyModelInstance@@IAEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModelInstance::__GetDeformableD3DVertexBufferPtr
  00022	89 45 f8	 mov	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], eax

; 88   : 	// END_OF_WORK
; 89   : 	LPDIRECT3DVERTEXBUFFER8 lpd3dRigidPNTVtxBuf = m_pModel->GetPNTD3DVertexBuffer();

  00025	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00028	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0002b	e8 00 00 00 00	 call	 ?GetPNTD3DVertexBuffer@CGrannyModel@@QBEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModel::GetPNTD3DVertexBuffer
  00030	89 45 f4	 mov	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], eax

; 90   : 
; 91   :  	STATEMANAGER.SetVertexShader(ms_pntVS);

  00033	ff 35 00 00 00
	00		 push	 DWORD PTR ?ms_pntVS@CGraphicBase@@1KA ; CGraphicBase::ms_pntVS
  00039	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0003f	e8 00 00 00 00	 call	 ?SetVertexShader@CStateManager@@QAEXK@Z ; CStateManager::SetVertexShader

; 92   : 
; 93   : 	if (lpd3dDeformPNTVtxBuf)

  00044	83 7d f8 00	 cmp	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], 0
  00048	74 1e		 je	 SHORT $LN3@BlendRende

; 94   : 	{
; 95   : 		STATEMANAGER.SetStreamSource(0, lpd3dDeformPNTVtxBuf, sizeof(TPNTVertex));

  0004a	6a 20		 push	 32			; 00000020H
  0004c	ff 75 f8	 push	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp]
  0004f	6a 00		 push	 0
  00051	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00057	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 96   : 		RenderMeshNodeListWithOneTexture(CGrannyMesh::TYPE_DEFORM, CGrannyMaterial::TYPE_BLEND_PNT);

  0005c	6a 01		 push	 1
  0005e	6a 01		 push	 1
  00060	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00063	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithOneTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithOneTexture
$LN3@BlendRende:

; 97   : 	}
; 98   : 
; 99   : 	if (lpd3dRigidPNTVtxBuf)

  00068	83 7d f4 00	 cmp	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], 0
  0006c	74 1e		 je	 SHORT $LN1@BlendRende

; 100  : 	{
; 101  : 		STATEMANAGER.SetStreamSource(0, lpd3dRigidPNTVtxBuf, sizeof(TPNTVertex));

  0006e	6a 20		 push	 32			; 00000020H
  00070	ff 75 f4	 push	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp]
  00073	6a 00		 push	 0
  00075	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0007b	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 102  : 		RenderMeshNodeListWithOneTexture(CGrannyMesh::TYPE_RIGID, CGrannyMaterial::TYPE_BLEND_PNT);

  00080	6a 01		 push	 1
  00082	6a 00		 push	 0
  00084	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00087	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithOneTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithOneTexture
$LN1@BlendRende:

; 103  : 	}
; 104  : }

  0008c	c9		 leave
  0008d	c3		 ret	 0
?BlendRenderWithOneTexture@CGrannyModelInstance@@QAEXXZ ENDP ; CGrannyModelInstance::BlendRenderWithOneTexture
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
;	COMDAT ?RenderWithTwoTexture@CGrannyModelInstance@@QAEXXZ
_TEXT	SEGMENT
_lpd3dRigidPNTVtxBuf$ = -12				; size = 4
_lpd3dDeformPNTVtxBuf$ = -8				; size = 4
_this$ = -4						; size = 4
?RenderWithTwoTexture@CGrannyModelInstance@@QAEXXZ PROC	; CGrannyModelInstance::RenderWithTwoTexture, COMDAT
; _this$ = ecx

; 108  : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 109  : 	// FIXME : Deform, Render, BlendRender를 묶어 상위에서 걸러주는 것이 더 나을 듯 - [levites]
; 110  : 	if (IsEmpty())

  00009	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000c	e8 00 00 00 00	 call	 ?IsEmpty@CGrannyModelInstance@@QAE_NXZ ; CGrannyModelInstance::IsEmpty
  00011	0f b6 c0	 movzx	 eax, al
  00014	85 c0		 test	 eax, eax
  00016	74 02		 je	 SHORT $LN6@RenderWith

; 111  : 		return;

  00018	eb 72		 jmp	 SHORT $LN1@RenderWith
$LN6@RenderWith:

; 112  : 
; 113  : 	STATEMANAGER.SetVertexShader(ms_pntVS);

  0001a	ff 35 00 00 00
	00		 push	 DWORD PTR ?ms_pntVS@CGraphicBase@@1KA ; CGraphicBase::ms_pntVS
  00020	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00026	e8 00 00 00 00	 call	 ?SetVertexShader@CStateManager@@QAEXK@Z ; CStateManager::SetVertexShader

; 114  : 
; 115  : 	// WORK
; 116  : 	LPDIRECT3DVERTEXBUFFER8 lpd3dDeformPNTVtxBuf = __GetDeformableD3DVertexBufferPtr();

  0002b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0002e	e8 00 00 00 00	 call	 ?__GetDeformableD3DVertexBufferPtr@CGrannyModelInstance@@IAEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModelInstance::__GetDeformableD3DVertexBufferPtr
  00033	89 45 f8	 mov	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], eax

; 117  : 	// END_OF_WORK
; 118  : 	LPDIRECT3DVERTEXBUFFER8 lpd3dRigidPNTVtxBuf = m_pModel->GetPNTD3DVertexBuffer();

  00036	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00039	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0003c	e8 00 00 00 00	 call	 ?GetPNTD3DVertexBuffer@CGrannyModel@@QBEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModel::GetPNTD3DVertexBuffer
  00041	89 45 f4	 mov	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], eax

; 119  : 
; 120  : 	if (lpd3dDeformPNTVtxBuf)

  00044	83 7d f8 00	 cmp	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], 0
  00048	74 1e		 je	 SHORT $LN3@RenderWith

; 121  : 	{
; 122  : 		STATEMANAGER.SetStreamSource(0, lpd3dDeformPNTVtxBuf, sizeof(TPNTVertex));

  0004a	6a 20		 push	 32			; 00000020H
  0004c	ff 75 f8	 push	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp]
  0004f	6a 00		 push	 0
  00051	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00057	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 123  : 		RenderMeshNodeListWithTwoTexture(CGrannyMesh::TYPE_DEFORM, CGrannyMaterial::TYPE_DIFFUSE_PNT);

  0005c	6a 00		 push	 0
  0005e	6a 01		 push	 1
  00060	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00063	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithTwoTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithTwoTexture
$LN3@RenderWith:

; 124  : 	}
; 125  : 	if (lpd3dRigidPNTVtxBuf)

  00068	83 7d f4 00	 cmp	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], 0
  0006c	74 1e		 je	 SHORT $LN1@RenderWith

; 126  : 	{
; 127  : 		STATEMANAGER.SetStreamSource(0, lpd3dRigidPNTVtxBuf, sizeof(TPNTVertex));

  0006e	6a 20		 push	 32			; 00000020H
  00070	ff 75 f4	 push	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp]
  00073	6a 00		 push	 0
  00075	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0007b	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 128  : 		RenderMeshNodeListWithTwoTexture(CGrannyMesh::TYPE_RIGID, CGrannyMaterial::TYPE_DIFFUSE_PNT);

  00080	6a 00		 push	 0
  00082	6a 00		 push	 0
  00084	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00087	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithTwoTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithTwoTexture
$LN1@RenderWith:

; 129  : 	}
; 130  : }

  0008c	c9		 leave
  0008d	c3		 ret	 0
?RenderWithTwoTexture@CGrannyModelInstance@@QAEXXZ ENDP	; CGrannyModelInstance::RenderWithTwoTexture
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
;	COMDAT ?RenderWithOneTexture@CGrannyModelInstance@@QAEXXZ
_TEXT	SEGMENT
_lpd3dRigidPNTVtxBuf$ = -12				; size = 4
_lpd3dDeformPNTVtxBuf$ = -8				; size = 4
_this$ = -4						; size = 4
?RenderWithOneTexture@CGrannyModelInstance@@QAEXXZ PROC	; CGrannyModelInstance::RenderWithOneTexture, COMDAT
; _this$ = ecx

; 49   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 50   : 	// FIXME : Deform, Render, BlendRender를 묶어 상위에서 걸러주는 것이 더 나을 듯 - [levites]
; 51   : 	if (IsEmpty())

  00009	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000c	e8 00 00 00 00	 call	 ?IsEmpty@CGrannyModelInstance@@QAE_NXZ ; CGrannyModelInstance::IsEmpty
  00011	0f b6 c0	 movzx	 eax, al
  00014	85 c0		 test	 eax, eax
  00016	74 02		 je	 SHORT $LN6@RenderWith

; 52   : 		return;

  00018	eb 72		 jmp	 SHORT $LN1@RenderWith
$LN6@RenderWith:

; 53   : 
; 54   : #ifdef _TEST
; 55   : 	Granny_RenderBoxBones(GrannyGetSourceSkeleton(m_pgrnModelInstance), m_pgrnWorldPose, TEST_matWorld);
; 56   : 	if (GetAsyncKeyState('P'))
; 57   : 		Tracef("render %x", m_pgrnModelInstance);	
; 58   : 	return;
; 59   : #endif
; 60   : 
; 61   : 	STATEMANAGER.SetVertexShader(ms_pntVS);

  0001a	ff 35 00 00 00
	00		 push	 DWORD PTR ?ms_pntVS@CGraphicBase@@1KA ; CGraphicBase::ms_pntVS
  00020	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00026	e8 00 00 00 00	 call	 ?SetVertexShader@CStateManager@@QAEXK@Z ; CStateManager::SetVertexShader

; 62   : 
; 63   : 	// WORK
; 64   : 	LPDIRECT3DVERTEXBUFFER8 lpd3dDeformPNTVtxBuf = __GetDeformableD3DVertexBufferPtr();

  0002b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0002e	e8 00 00 00 00	 call	 ?__GetDeformableD3DVertexBufferPtr@CGrannyModelInstance@@IAEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModelInstance::__GetDeformableD3DVertexBufferPtr
  00033	89 45 f8	 mov	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], eax

; 65   : 	// END_OF_WORK
; 66   : 
; 67   : 	LPDIRECT3DVERTEXBUFFER8 lpd3dRigidPNTVtxBuf = m_pModel->GetPNTD3DVertexBuffer();

  00036	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00039	8b 48 04	 mov	 ecx, DWORD PTR [eax+4]
  0003c	e8 00 00 00 00	 call	 ?GetPNTD3DVertexBuffer@CGrannyModel@@QBEPAUIDirect3DVertexBuffer8@@XZ ; CGrannyModel::GetPNTD3DVertexBuffer
  00041	89 45 f4	 mov	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], eax

; 68   : 
; 69   : 	if (lpd3dDeformPNTVtxBuf)

  00044	83 7d f8 00	 cmp	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp], 0
  00048	74 1e		 je	 SHORT $LN3@RenderWith

; 70   : 	{
; 71   : 		STATEMANAGER.SetStreamSource(0, lpd3dDeformPNTVtxBuf, sizeof(TPNTVertex));

  0004a	6a 20		 push	 32			; 00000020H
  0004c	ff 75 f8	 push	 DWORD PTR _lpd3dDeformPNTVtxBuf$[ebp]
  0004f	6a 00		 push	 0
  00051	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  00057	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 72   : 		RenderMeshNodeListWithOneTexture(CGrannyMesh::TYPE_DEFORM, CGrannyMaterial::TYPE_DIFFUSE_PNT);

  0005c	6a 00		 push	 0
  0005e	6a 01		 push	 1
  00060	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00063	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithOneTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithOneTexture
$LN3@RenderWith:

; 73   : 	}
; 74   : 	if (lpd3dRigidPNTVtxBuf)

  00068	83 7d f4 00	 cmp	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp], 0
  0006c	74 1e		 je	 SHORT $LN1@RenderWith

; 75   : 	{
; 76   : 		STATEMANAGER.SetStreamSource(0, lpd3dRigidPNTVtxBuf, sizeof(TPNTVertex));

  0006e	6a 20		 push	 32			; 00000020H
  00070	ff 75 f4	 push	 DWORD PTR _lpd3dRigidPNTVtxBuf$[ebp]
  00073	6a 00		 push	 0
  00075	8b 0d 00 00 00
	00		 mov	 ecx, DWORD PTR ?ms_singleton@?$CSingleton@VCStateManager@@@@0PAVCStateManager@@A ; CSingleton<CStateManager>::ms_singleton
  0007b	e8 00 00 00 00	 call	 ?SetStreamSource@CStateManager@@QAEXIPAUIDirect3DVertexBuffer8@@I@Z ; CStateManager::SetStreamSource

; 77   : 		RenderMeshNodeListWithOneTexture(CGrannyMesh::TYPE_RIGID, CGrannyMaterial::TYPE_DIFFUSE_PNT);

  00080	6a 00		 push	 0
  00082	6a 00		 push	 0
  00084	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00087	e8 00 00 00 00	 call	 ?RenderMeshNodeListWithOneTexture@CGrannyModelInstance@@IAEXW4EType@CGrannyMesh@@W42CGrannyMaterial@@@Z ; CGrannyModelInstance::RenderMeshNodeListWithOneTexture
$LN1@RenderWith:

; 78   : 	}
; 79   : }

  0008c	c9		 leave
  0008d	c3		 ret	 0
?RenderWithOneTexture@CGrannyModelInstance@@QAEXXZ ENDP	; CGrannyModelInstance::RenderWithOneTexture
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\eterGrnLib\ModelInstanceRender.cpp
;	COMDAT ?DeformNoSkin@CGrannyModelInstance@@QAEXPBUD3DXMATRIX@@@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
_c_pWorldMatrix$ = 8					; size = 4
?DeformNoSkin@CGrannyModelInstance@@QAEXPBUD3DXMATRIX@@@Z PROC ; CGrannyModelInstance::DeformNoSkin, COMDAT
; _this$ = ecx

; 30   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 31   : 	if (IsEmpty())

  00007	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000a	e8 00 00 00 00	 call	 ?IsEmpty@CGrannyModelInstance@@QAE_NXZ ; CGrannyModelInstance::IsEmpty
  0000f	0f b6 c0	 movzx	 eax, al
  00012	85 c0		 test	 eax, eax
  00014	74 02		 je	 SHORT $LN2@DeformNoSk

; 32   : 		return;

  00016	eb 13		 jmp	 SHORT $LN1@DeformNoSk
$LN2@DeformNoSk:

; 33   : 
; 34   : 	// DELETED
; 35   : 	//m_pgrnWorldPose = m_pgrnWorldPoseReal;
; 36   : 	///////////////////////////////
; 37   : 	
; 38   : 	UpdateWorldPose();

  00018	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0001b	e8 00 00 00 00	 call	 ?UpdateWorldPose@CGrannyModelInstance@@IAEXXZ ; CGrannyModelInstance::UpdateWorldPose

; 39   : 	UpdateWorldMatrices(c_pWorldMatrix);

  00020	ff 75 08	 push	 DWORD PTR _c_pWorldMatrix$[ebp]
  00023	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00026	e8 00 00 00 00	 call	 ?UpdateWorldMatrices@CGrannyModelInstance@@IAEXPBUD3DXMATRIX@@@Z ; CGrannyModelInstance::UpdateWorldMatrices
$LN1@DeformNoSk:

; 40   : }

  0002b	c9		 leave
  0002c	c2 04 00	 ret	 4
?DeformNoSkin@CGrannyModelInstance@@QAEXPBUD3DXMATRIX@@@Z ENDP ; CGrannyModelInstance::DeformNoSkin
_TEXT	ENDS
; Function compile flags: /Odspy
;	COMDAT ??_H@YGXPAXIIP6EPAX0@Z@Z
_TEXT	SEGMENT
tv66 = -4						; size = 4
___t$ = 8						; size = 4
___s$ = 12						; size = 4
___n$ = 16						; size = 4
___f$ = 20						; size = 4
??_H@YGXPAXIIP6EPAX0@Z@Z PROC				; `vector constructor iterator', COMDAT
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
$LN2@vector:
  00004	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  00007	89 45 fc	 mov	 DWORD PTR tv66[ebp], eax
  0000a	8b 45 10	 mov	 eax, DWORD PTR ___n$[ebp]
  0000d	48		 dec	 eax
  0000e	89 45 10	 mov	 DWORD PTR ___n$[ebp], eax
  00011	83 7d fc 00	 cmp	 DWORD PTR tv66[ebp], 0
  00015	76 11		 jbe	 SHORT $LN1@vector
  00017	8b 4d 08	 mov	 ecx, DWORD PTR ___t$[ebp]
  0001a	ff 55 14	 call	 DWORD PTR ___f$[ebp]
  0001d	8b 45 08	 mov	 eax, DWORD PTR ___t$[ebp]
  00020	03 45 0c	 add	 eax, DWORD PTR ___s$[ebp]
  00023	89 45 08	 mov	 DWORD PTR ___t$[ebp], eax
  00026	eb dc		 jmp	 SHORT $LN2@vector
$LN1@vector:
  00028	c9		 leave
  00029	c2 10 00	 ret	 16			; 00000010H
??_H@YGXPAXIIP6EPAX0@Z@Z ENDP				; `vector constructor iterator'
_TEXT	ENDS
END

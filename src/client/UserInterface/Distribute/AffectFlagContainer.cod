; Listing generated by Microsoft (R) Optimizing Compiler Version 19.28.29335.0 

	TITLE	D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\UserInterface\AffectFlagContainer.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??0CAffectFlagContainer@@QAE@XZ			; CAffectFlagContainer::CAffectFlagContainer
PUBLIC	??1CAffectFlagContainer@@QAE@XZ			; CAffectFlagContainer::~CAffectFlagContainer
PUBLIC	?Clear@CAffectFlagContainer@@QAEXXZ		; CAffectFlagContainer::Clear
PUBLIC	?CopyInstance@CAffectFlagContainer@@QAEXABV1@@Z	; CAffectFlagContainer::CopyInstance
PUBLIC	?Set@CAffectFlagContainer@@QAEXI_N@Z		; CAffectFlagContainer::Set
PUBLIC	?IsSet@CAffectFlagContainer@@QBE_NI@Z		; CAffectFlagContainer::IsSet
PUBLIC	?CopyData@CAffectFlagContainer@@QAEXIIPBX@Z	; CAffectFlagContainer::CopyData
PUBLIC	?ConvertToPosition@CAffectFlagContainer@@QBEXPAI0@Z ; CAffectFlagContainer::ConvertToPosition
PUBLIC	??_C@_0CP@PLCKJEOM@CAffectFlagContainer?3?3Set?$CIuPos?$DN@ ; `string'
PUBLIC	??_C@_0CH@FJPFCGKP@CAffectFlagContainer?3?3IsSet?$CIuPo@ ; `string'
EXTRN	?TraceError@@YAXPBDZZ:PROC			; TraceError
;	COMDAT ??_C@_0CH@FJPFCGKP@CAffectFlagContainer?3?3IsSet?$CIuPo@
CONST	SEGMENT
??_C@_0CH@FJPFCGKP@CAffectFlagContainer?3?3IsSet?$CIuPo@ DB 'CAffectFlagC'
	DB	'ontainer::IsSet(uPos=%d>%d', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0CP@PLCKJEOM@CAffectFlagContainer?3?3Set?$CIuPos?$DN@
CONST	SEGMENT
??_C@_0CP@PLCKJEOM@CAffectFlagContainer?3?3Set?$CIuPos?$DN@ DB 'CAffectFl'
	DB	'agContainer::Set(uPos=%d>%d, isSet=%d', 00H	; `string'
CONST	ENDS
; Function compile flags: /Ogtp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\UserInterface\AffectFlagContainer.cpp
;	COMDAT ?ConvertToPosition@CAffectFlagContainer@@QBEXPAI0@Z
_TEXT	SEGMENT
_uRetX$ = 8						; size = 4
_uRetY$ = 12						; size = 4
?ConvertToPosition@CAffectFlagContainer@@QBEXPAI0@Z PROC ; CAffectFlagContainer::ConvertToPosition, COMDAT
; _this$ = ecx

; 43   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 44   : 	DWORD* pos = (DWORD*)m_aElement;
; 45   : 	*uRetX = pos[0];

  00003	8b 45 08	 mov	 eax, DWORD PTR _uRetX$[ebp]
  00006	8b 11		 mov	 edx, DWORD PTR [ecx]
  00008	89 10		 mov	 DWORD PTR [eax], edx

; 46   : 	*uRetY = pos[1];

  0000a	8b 45 0c	 mov	 eax, DWORD PTR _uRetY$[ebp]
  0000d	8b 49 04	 mov	 ecx, DWORD PTR [ecx+4]
  00010	89 08		 mov	 DWORD PTR [eax], ecx

; 47   : }

  00012	5d		 pop	 ebp
  00013	c2 08 00	 ret	 8
?ConvertToPosition@CAffectFlagContainer@@QBEXPAI0@Z ENDP ; CAffectFlagContainer::ConvertToPosition
_TEXT	ENDS
; Function compile flags: /Ogtp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\UserInterface\AffectFlagContainer.cpp
;	COMDAT ?CopyData@CAffectFlagContainer@@QAEXIIPBX@Z
_TEXT	SEGMENT
_this$1$ = -4						; size = 4
_uPos$ = 8						; size = 4
_uByteSize$ = 12					; size = 4
_uBitEnd$1$ = 16					; size = 4
_c_pvData$ = 16						; size = 4
?CopyData@CAffectFlagContainer@@QAEXIIPBX@Z PROC	; CAffectFlagContainer::CopyData, COMDAT
; _this$ = ecx

; 24   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx

; 25   : 	const BYTE* c_pbData=(const BYTE*)c_pvData; 
; 26   : 	Element bMask=0x01;
; 27   : 
; 28   : 	UINT uBitEnd=uPos+uByteSize*8;

  00004	8b 45 0c	 mov	 eax, DWORD PTR _uByteSize$[ebp]
  00007	53		 push	 ebx
  00008	56		 push	 esi
  00009	8b 75 08	 mov	 esi, DWORD PTR _uPos$[ebp]
  0000c	b3 01		 mov	 bl, 1
  0000e	57		 push	 edi
  0000f	8b 7d 10	 mov	 edi, DWORD PTR _c_pvData$[ebp]
  00012	89 4d fc	 mov	 DWORD PTR _this$1$[ebp], ecx
  00015	8d 04 c6	 lea	 eax, DWORD PTR [esi+eax*8]
  00018	89 45 10	 mov	 DWORD PTR _uBitEnd$1$[ebp], eax

; 29   : 	for (UINT i=uPos; i<uBitEnd; ++i)

  0001b	3b f0		 cmp	 esi, eax
  0001d	73 32		 jae	 SHORT $LN3@CopyData
  0001f	90		 npad	 1
$LL4@CopyData:

; 30   : 	{
; 31   : 		Set(i, (*c_pbData & bMask) ? true : false);

  00020	84 1f		 test	 BYTE PTR [edi], bl
  00022	0f 95 c0	 setne	 al
  00025	0f b6 c0	 movzx	 eax, al
  00028	50		 push	 eax
  00029	56		 push	 esi
  0002a	e8 00 00 00 00	 call	 ?Set@CAffectFlagContainer@@QAEXI_N@Z ; CAffectFlagContainer::Set
  0002f	8a cb		 mov	 cl, bl
  00031	8d 47 01	 lea	 eax, DWORD PTR [edi+1]
  00034	46		 inc	 esi
  00035	bb 01 00 00 00	 mov	 ebx, 1
  0003a	02 c9		 add	 cl, cl
  0003c	0f 45 c7	 cmovne	 eax, edi
  0003f	84 c9		 test	 cl, cl
  00041	8b f8		 mov	 edi, eax
  00043	0f b6 c1	 movzx	 eax, cl
  00046	8b 4d fc	 mov	 ecx, DWORD PTR _this$1$[ebp]
  00049	0f 45 d8	 cmovne	 ebx, eax
  0004c	3b 75 10	 cmp	 esi, DWORD PTR _uBitEnd$1$[ebp]
  0004f	72 cf		 jb	 SHORT $LL4@CopyData
$LN3@CopyData:
  00051	5f		 pop	 edi

; 32   : 		bMask<<=1;
; 33   : 
; 34   : 		if (bMask==0)
; 35   : 		{
; 36   : 			++c_pbData;
; 37   : 			bMask=0x01;
; 38   : 		}
; 39   : 	}
; 40   : }

  00052	5e		 pop	 esi
  00053	5b		 pop	 ebx
  00054	8b e5		 mov	 esp, ebp
  00056	5d		 pop	 ebp
  00057	c2 0c 00	 ret	 12			; 0000000cH
?CopyData@CAffectFlagContainer@@QAEXIIPBX@Z ENDP	; CAffectFlagContainer::CopyData
_TEXT	ENDS
; Function compile flags: /Ogtp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\UserInterface\AffectFlagContainer.cpp
;	COMDAT ?IsSet@CAffectFlagContainer@@QBE_NI@Z
_TEXT	SEGMENT
_uPos$ = 8						; size = 4
?IsSet@CAffectFlagContainer@@QBE_NI@Z PROC		; CAffectFlagContainer::IsSet, COMDAT
; _this$ = ecx

; 78   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	56		 push	 esi
  00004	8b f1		 mov	 esi, ecx

; 79   : 	if (uPos/8>=BYTE_SIZE)

  00006	8b 4d 08	 mov	 ecx, DWORD PTR _uPos$[ebp]
  00009	8b d1		 mov	 edx, ecx
  0000b	c1 ea 03	 shr	 edx, 3
  0000e	83 fa 08	 cmp	 edx, 8
  00011	72 17		 jb	 SHORT $LN2@IsSet

; 80   : 	{
; 81   : 		TraceError("CAffectFlagContainer::IsSet(uPos=%d>%d", uPos, BYTE_SIZE*8);

  00013	6a 40		 push	 64			; 00000040H
  00015	51		 push	 ecx
  00016	68 00 00 00 00	 push	 OFFSET ??_C@_0CH@FJPFCGKP@CAffectFlagContainer?3?3IsSet?$CIuPo@
  0001b	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00020	83 c4 0c	 add	 esp, 12			; 0000000cH

; 82   : 		return false;

  00023	32 c0		 xor	 al, al
  00025	5e		 pop	 esi

; 89   : 		return true;
; 90   : 
; 91   : 	return false;
; 92   : }

  00026	5d		 pop	 ebp
  00027	c2 04 00	 ret	 4
$LN2@IsSet:

; 83   : 	}
; 84   : 
; 85   : 	const BYTE& c_rElement=m_aElement[uPos/8];
; 86   : 
; 87   : 	BYTE bMask=BYTE(1<<(uPos&7));

  0002a	83 e1 07	 and	 ecx, 7
  0002d	b0 01		 mov	 al, 1
  0002f	d2 e0		 shl	 al, cl

; 88   : 	if (c_rElement&bMask)

  00031	84 04 32	 test	 al, BYTE PTR [edx+esi]
  00034	5e		 pop	 esi
  00035	0f 95 c0	 setne	 al

; 89   : 		return true;
; 90   : 
; 91   : 	return false;
; 92   : }

  00038	5d		 pop	 ebp
  00039	c2 04 00	 ret	 4
?IsSet@CAffectFlagContainer@@QBE_NI@Z ENDP		; CAffectFlagContainer::IsSet
_TEXT	ENDS
; Function compile flags: /Ogtp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\UserInterface\AffectFlagContainer.cpp
;	COMDAT ?Set@CAffectFlagContainer@@QAEXI_N@Z
_TEXT	SEGMENT
_uPos$ = 8						; size = 4
_isSet$ = 12						; size = 1
?Set@CAffectFlagContainer@@QAEXI_N@Z PROC		; CAffectFlagContainer::Set, COMDAT
; _this$ = ecx

; 61   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	8b d1		 mov	 edx, ecx

; 62   : 	if (uPos/8>=BYTE_SIZE)

  00005	8b 4d 08	 mov	 ecx, DWORD PTR _uPos$[ebp]
  00008	8b c1		 mov	 eax, ecx
  0000a	c1 e8 03	 shr	 eax, 3
  0000d	83 f8 08	 cmp	 eax, 8
  00010	72 19		 jb	 SHORT $LN2@Set

; 63   : 	{
; 64   : 		TraceError("CAffectFlagContainer::Set(uPos=%d>%d, isSet=%d", uPos, BYTE_SIZE*8, isSet);

  00012	0f b6 45 0c	 movzx	 eax, BYTE PTR _isSet$[ebp]
  00016	50		 push	 eax
  00017	6a 40		 push	 64			; 00000040H
  00019	51		 push	 ecx
  0001a	68 00 00 00 00	 push	 OFFSET ??_C@_0CP@PLCKJEOM@CAffectFlagContainer?3?3Set?$CIuPos?$DN@
  0001f	e8 00 00 00 00	 call	 ?TraceError@@YAXPBDZZ	; TraceError
  00024	83 c4 10	 add	 esp, 16			; 00000010H

; 75   : }

  00027	5d		 pop	 ebp
  00028	c2 08 00	 ret	 8
$LN2@Set:

; 65   : 		return;
; 66   : 	}
; 67   : 
; 68   : 	BYTE& rElement=m_aElement[uPos/8];

  0002b	03 d0		 add	 edx, eax

; 69   : 
; 70   : 	BYTE bMask=BYTE(1<<(uPos&7));

  0002d	83 e1 07	 and	 ecx, 7
  00030	b0 01		 mov	 al, 1
  00032	d2 e0		 shl	 al, cl

; 71   : 	if (isSet)

  00034	80 7d 0c 00	 cmp	 BYTE PTR _isSet$[ebp], 0
  00038	8a 0a		 mov	 cl, BYTE PTR [edx]
  0003a	74 08		 je	 SHORT $LN3@Set

; 72   : 		rElement|=bMask;

  0003c	0a c8		 or	 cl, al
  0003e	88 0a		 mov	 BYTE PTR [edx], cl

; 75   : }

  00040	5d		 pop	 ebp
  00041	c2 08 00	 ret	 8
$LN3@Set:

; 73   : 	else
; 74   : 		rElement&=~bMask;

  00044	f6 d0		 not	 al
  00046	22 c1		 and	 al, cl
  00048	88 02		 mov	 BYTE PTR [edx], al

; 75   : }

  0004a	5d		 pop	 ebp
  0004b	c2 08 00	 ret	 8
?Set@CAffectFlagContainer@@QAEXI_N@Z ENDP		; CAffectFlagContainer::Set
_TEXT	ENDS
; Function compile flags: /Ogtp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\UserInterface\AffectFlagContainer.cpp
;	COMDAT ?CopyInstance@CAffectFlagContainer@@QAEXABV1@@Z
_TEXT	SEGMENT
_c_rkAffectContainer$ = 8				; size = 4
?CopyInstance@CAffectFlagContainer@@QAEXABV1@@Z PROC	; CAffectFlagContainer::CopyInstance, COMDAT
; _this$ = ecx

; 19   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp

; 20   : 	memcpy(m_aElement, c_rkAffectContainer.m_aElement, sizeof(m_aElement));

  00003	8b 45 08	 mov	 eax, DWORD PTR _c_rkAffectContainer$[ebp]
  00006	8b 10		 mov	 edx, DWORD PTR [eax]
  00008	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  0000b	89 11		 mov	 DWORD PTR [ecx], edx
  0000d	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 21   : }

  00010	5d		 pop	 ebp
  00011	c2 04 00	 ret	 4
?CopyInstance@CAffectFlagContainer@@QAEXABV1@@Z ENDP	; CAffectFlagContainer::CopyInstance
_TEXT	ENDS
; Function compile flags: /Ogtp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\UserInterface\AffectFlagContainer.cpp
;	COMDAT ?Clear@CAffectFlagContainer@@QAEXXZ
_TEXT	SEGMENT
?Clear@CAffectFlagContainer@@QAEXXZ PROC		; CAffectFlagContainer::Clear, COMDAT
; _this$ = ecx

; 14   : {

  00000	0f 57 c0	 xorps	 xmm0, xmm0

; 15   : 	memset(m_aElement, 0, sizeof(m_aElement));

  00003	66 0f d6 01	 movq	 QWORD PTR [ecx], xmm0

; 16   : }

  00007	c3		 ret	 0
?Clear@CAffectFlagContainer@@QAEXXZ ENDP		; CAffectFlagContainer::Clear
_TEXT	ENDS
; Function compile flags: /Ogtp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\UserInterface\AffectFlagContainer.cpp
;	COMDAT ??1CAffectFlagContainer@@QAE@XZ
_TEXT	SEGMENT
??1CAffectFlagContainer@@QAE@XZ PROC			; CAffectFlagContainer::~CAffectFlagContainer, COMDAT
; _this$ = ecx

; 11   : }

  00000	c2 00 00	 ret	 0
??1CAffectFlagContainer@@QAE@XZ ENDP			; CAffectFlagContainer::~CAffectFlagContainer
_TEXT	ENDS
; Function compile flags: /Ogtp
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\UserInterface\AffectFlagContainer.cpp
;	COMDAT ??0CAffectFlagContainer@@QAE@XZ
_TEXT	SEGMENT
??0CAffectFlagContainer@@QAE@XZ PROC			; CAffectFlagContainer::CAffectFlagContainer, COMDAT
; _this$ = ecx

; 5    : {

  00000	56		 push	 esi
  00001	8b f1		 mov	 esi, ecx

; 6    : 	Clear();

  00003	e8 00 00 00 00	 call	 ?Clear@CAffectFlagContainer@@QAEXXZ ; CAffectFlagContainer::Clear

; 7    : }

  00008	8b c6		 mov	 eax, esi
  0000a	5e		 pop	 esi
  0000b	c3		 ret	 0
??0CAffectFlagContainer@@QAE@XZ ENDP			; CAffectFlagContainer::CAffectFlagContainer
_TEXT	ENDS
END

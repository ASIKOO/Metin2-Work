; Listing generated by Microsoft (R) Optimizing Compiler Version 19.28.29335.0 

	TITLE	D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB LIBCMT
INCLUDELIB OLDNAMES

PUBLIC	??0CReferenceObject@@QAE@XZ			; CReferenceObject::CReferenceObject
PUBLIC	??1CReferenceObject@@UAE@XZ			; CReferenceObject::~CReferenceObject
PUBLIC	?AddReference@CReferenceObject@@QAEXXZ		; CReferenceObject::AddReference
PUBLIC	?AddReferenceOnly@CReferenceObject@@QAEXXZ	; CReferenceObject::AddReferenceOnly
PUBLIC	?Release@CReferenceObject@@QAEXXZ		; CReferenceObject::Release
PUBLIC	?GetReferenceCount@CReferenceObject@@QAEHXZ	; CReferenceObject::GetReferenceCount
PUBLIC	?canDestroy@CReferenceObject@@QAE_NXZ		; CReferenceObject::canDestroy
PUBLIC	?OnConstruct@CReferenceObject@@MAEXXZ		; CReferenceObject::OnConstruct
PUBLIC	?OnSelfDestruct@CReferenceObject@@MAEXXZ	; CReferenceObject::OnSelfDestruct
PUBLIC	??_GCReferenceObject@@UAEPAXI@Z			; CReferenceObject::`scalar deleting destructor'
PUBLIC	??_7CReferenceObject@@6B@			; CReferenceObject::`vftable'
PUBLIC	??_R4CReferenceObject@@6B@			; CReferenceObject::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCReferenceObject@@@8			; CReferenceObject `RTTI Type Descriptor'
PUBLIC	??_R3CReferenceObject@@8			; CReferenceObject::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CReferenceObject@@8			; CReferenceObject::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CReferenceObject@@8		; CReferenceObject::`RTTI Base Class Descriptor at (0,-1,0,64)'
EXTRN	??3@YAXPAXI@Z:PROC				; operator delete
EXTRN	??_ECReferenceObject@@UAEPAXI@Z:PROC		; CReferenceObject::`vector deleting destructor'
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
;	COMDAT ??_R1A@?0A@EA@CReferenceObject@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CReferenceObject@@8 DD FLAT:??_R0?AVCReferenceObject@@@8 ; CReferenceObject::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CReferenceObject@@8
rdata$r	ENDS
;	COMDAT ??_R2CReferenceObject@@8
rdata$r	SEGMENT
??_R2CReferenceObject@@8 DD FLAT:??_R1A@?0A@EA@CReferenceObject@@8 ; CReferenceObject::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CReferenceObject@@8
rdata$r	SEGMENT
??_R3CReferenceObject@@8 DD 00H				; CReferenceObject::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CReferenceObject@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCReferenceObject@@@8
data$rs	SEGMENT
??_R0?AVCReferenceObject@@@8 DD FLAT:??_7type_info@@6B@	; CReferenceObject `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCReferenceObject@@', 00H
data$rs	ENDS
;	COMDAT ??_R4CReferenceObject@@6B@
rdata$r	SEGMENT
??_R4CReferenceObject@@6B@ DD 00H			; CReferenceObject::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCReferenceObject@@@8
	DD	FLAT:??_R3CReferenceObject@@8
rdata$r	ENDS
;	COMDAT ??_7CReferenceObject@@6B@
CONST	SEGMENT
??_7CReferenceObject@@6B@ DD FLAT:??_R4CReferenceObject@@6B@ ; CReferenceObject::`vftable'
	DD	FLAT:??_ECReferenceObject@@UAEPAXI@Z
	DD	FLAT:?OnConstruct@CReferenceObject@@MAEXXZ
	DD	FLAT:?OnSelfDestruct@CReferenceObject@@MAEXXZ
CONST	ENDS
; Function compile flags: /Odspy
;	COMDAT ??_GCReferenceObject@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCReferenceObject@@UAEPAXI@Z PROC			; CReferenceObject::`scalar deleting destructor', COMDAT
; _this$ = ecx
  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  00007	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0000a	e8 00 00 00 00	 call	 ??1CReferenceObject@@UAE@XZ ; CReferenceObject::~CReferenceObject
  0000f	8b 45 08	 mov	 eax, DWORD PTR ___flags$[ebp]
  00012	83 e0 01	 and	 eax, 1
  00015	74 0c		 je	 SHORT $LN2@scalar
  00017	6a 0c		 push	 12			; 0000000cH
  00019	ff 75 fc	 push	 DWORD PTR _this$[ebp]
  0001c	e8 00 00 00 00	 call	 ??3@YAXPAXI@Z		; operator delete
  00021	59		 pop	 ecx
  00022	59		 pop	 ecx
$LN2@scalar:
  00023	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00026	c9		 leave
  00027	c2 04 00	 ret	 4
??_GCReferenceObject@@UAEPAXI@Z ENDP			; CReferenceObject::`scalar deleting destructor'
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
;	COMDAT ?OnSelfDestruct@CReferenceObject@@MAEXXZ
_TEXT	SEGMENT
tv71 = -12						; size = 4
_this$ = -8						; size = 4
$T1 = -4						; size = 4
?OnSelfDestruct@CReferenceObject@@MAEXXZ PROC		; CReferenceObject::OnSelfDestruct, COMDAT
; _this$ = ecx

; 50   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	83 ec 0c	 sub	 esp, 12			; 0000000cH
  00006	89 4d f8	 mov	 DWORD PTR _this$[ebp], ecx

; 51   : 	m_destructed = true;

  00009	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  0000c	c6 40 08 01	 mov	 BYTE PTR [eax+8], 1

; 52   : 	delete this;

  00010	8b 45 f8	 mov	 eax, DWORD PTR _this$[ebp]
  00013	89 45 fc	 mov	 DWORD PTR $T1[ebp], eax
  00016	83 7d fc 00	 cmp	 DWORD PTR $T1[ebp], 0
  0001a	74 11		 je	 SHORT $LN3@OnSelfDest
  0001c	6a 01		 push	 1
  0001e	8b 45 fc	 mov	 eax, DWORD PTR $T1[ebp]
  00021	8b 00		 mov	 eax, DWORD PTR [eax]
  00023	8b 4d fc	 mov	 ecx, DWORD PTR $T1[ebp]
  00026	ff 10		 call	 DWORD PTR [eax]
  00028	89 45 f4	 mov	 DWORD PTR tv71[ebp], eax
  0002b	eb 04		 jmp	 SHORT $LN1@OnSelfDest
$LN3@OnSelfDest:
  0002d	83 65 f4 00	 and	 DWORD PTR tv71[ebp], 0
$LN1@OnSelfDest:

; 53   : }

  00031	c9		 leave
  00032	c3		 ret	 0
?OnSelfDestruct@CReferenceObject@@MAEXXZ ENDP		; CReferenceObject::OnSelfDestruct
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
;	COMDAT ?OnConstruct@CReferenceObject@@MAEXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?OnConstruct@CReferenceObject@@MAEXXZ PROC		; CReferenceObject::OnConstruct, COMDAT
; _this$ = ecx

; 45   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 46   : 	m_destructed = false;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	c6 40 08 00	 mov	 BYTE PTR [eax+8], 0

; 47   : }

  0000e	c9		 leave
  0000f	c3		 ret	 0
?OnConstruct@CReferenceObject@@MAEXXZ ENDP		; CReferenceObject::OnConstruct
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
;	COMDAT ?canDestroy@CReferenceObject@@QAE_NXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?canDestroy@CReferenceObject@@QAE_NXZ PROC		; CReferenceObject::canDestroy, COMDAT
; _this$ = ecx

; 56   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 57   : 	if (m_refCount > 0)

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	83 78 04 00	 cmp	 DWORD PTR [eax+4], 0
  0000e	7e 04		 jle	 SHORT $LN2@canDestroy

; 58   : 		return false;

  00010	32 c0		 xor	 al, al
  00012	eb 02		 jmp	 SHORT $LN1@canDestroy
$LN2@canDestroy:

; 59   : 
; 60   : 	return true;

  00014	b0 01		 mov	 al, 1
$LN1@canDestroy:

; 61   : }

  00016	c9		 leave
  00017	c3		 ret	 0
?canDestroy@CReferenceObject@@QAE_NXZ ENDP		; CReferenceObject::canDestroy
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
;	COMDAT ?GetReferenceCount@CReferenceObject@@QAEHXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?GetReferenceCount@CReferenceObject@@QAEHXZ PROC	; CReferenceObject::GetReferenceCount, COMDAT
; _this$ = ecx

; 21   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 22   : 	return m_refCount;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	8b 40 04	 mov	 eax, DWORD PTR [eax+4]

; 23   : }

  0000d	c9		 leave
  0000e	c3		 ret	 0
?GetReferenceCount@CReferenceObject@@QAEHXZ ENDP	; CReferenceObject::GetReferenceCount
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
;	COMDAT ?Release@CReferenceObject@@QAEXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?Release@CReferenceObject@@QAEXXZ PROC			; CReferenceObject::Release, COMDAT
; _this$ = ecx

; 31   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 32   : 	if (m_refCount > 1)

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	83 78 04 01	 cmp	 DWORD PTR [eax+4], 1
  0000e	7e 0f		 jle	 SHORT $LN2@Release

; 33   : 	{
; 34   : 		--m_refCount;

  00010	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00013	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  00016	48		 dec	 eax
  00017	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0001a	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 35   : 		return;

  0001d	eb 12		 jmp	 SHORT $LN1@Release
$LN2@Release:

; 36   : 	}
; 37   : 
; 38   : 	assert(m_destructed == false);
; 39   : 	assert(m_refCount >= 0);
; 40   : 	m_refCount = 0;

  0001f	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00022	83 60 04 00	 and	 DWORD PTR [eax+4], 0

; 41   : 	OnSelfDestruct();

  00026	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00029	8b 00		 mov	 eax, DWORD PTR [eax]
  0002b	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  0002e	ff 50 08	 call	 DWORD PTR [eax+8]
$LN1@Release:

; 42   : }

  00031	c9		 leave
  00032	c3		 ret	 0
?Release@CReferenceObject@@QAEXXZ ENDP			; CReferenceObject::Release
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
;	COMDAT ?AddReferenceOnly@CReferenceObject@@QAEXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?AddReferenceOnly@CReferenceObject@@QAEXXZ PROC		; CReferenceObject::AddReferenceOnly, COMDAT
; _this$ = ecx

; 26   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 27   : 	++m_refCount;

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  0000d	40		 inc	 eax
  0000e	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00011	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 28   : }

  00014	c9		 leave
  00015	c3		 ret	 0
?AddReferenceOnly@CReferenceObject@@QAEXXZ ENDP		; CReferenceObject::AddReferenceOnly
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
;	COMDAT ?AddReference@CReferenceObject@@QAEXXZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
?AddReference@CReferenceObject@@QAEXXZ PROC		; CReferenceObject::AddReference, COMDAT
; _this$ = ecx

; 13   : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx

; 14   : 	if (m_refCount == 0)

  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	83 78 04 00	 cmp	 DWORD PTR [eax+4], 0
  0000e	75 0b		 jne	 SHORT $LN2@AddReferen

; 15   : 		OnConstruct();

  00010	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00013	8b 00		 mov	 eax, DWORD PTR [eax]
  00015	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00018	ff 50 04	 call	 DWORD PTR [eax+4]
$LN2@AddReferen:

; 16   : 	
; 17   : 	++m_refCount;

  0001b	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001e	8b 40 04	 mov	 eax, DWORD PTR [eax+4]
  00021	40		 inc	 eax
  00022	8b 4d fc	 mov	 ecx, DWORD PTR _this$[ebp]
  00025	89 41 04	 mov	 DWORD PTR [ecx+4], eax

; 18   : }

  00028	c9		 leave
  00029	c3		 ret	 0
?AddReference@CReferenceObject@@QAEXXZ ENDP		; CReferenceObject::AddReference
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
;	COMDAT ??1CReferenceObject@@UAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??1CReferenceObject@@UAE@XZ PROC			; CReferenceObject::~CReferenceObject, COMDAT
; _this$ = ecx

; 9    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CReferenceObject@@6B@

; 10   : }

  00010	c9		 leave
  00011	c3		 ret	 0
??1CReferenceObject@@UAE@XZ ENDP			; CReferenceObject::~CReferenceObject
_TEXT	ENDS
; Function compile flags: /Odspy
; File D:\Metin2 Server Files\mainline\SRC_2014\Metin2Client\EterLib\ReferenceObject.cpp
;	COMDAT ??0CReferenceObject@@QAE@XZ
_TEXT	SEGMENT
_this$ = -4						; size = 4
??0CReferenceObject@@QAE@XZ PROC			; CReferenceObject::CReferenceObject, COMDAT
; _this$ = ecx

; 5    : {

  00000	55		 push	 ebp
  00001	8b ec		 mov	 ebp, esp
  00003	51		 push	 ecx
  00004	89 4d fc	 mov	 DWORD PTR _this$[ebp], ecx
  00007	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0000a	c7 00 00 00 00
	00		 mov	 DWORD PTR [eax], OFFSET ??_7CReferenceObject@@6B@

; 4    : CReferenceObject::CReferenceObject() : m_refCount(0), m_destructed(false)

  00010	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00013	83 60 04 00	 and	 DWORD PTR [eax+4], 0
  00017	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  0001a	c6 40 08 00	 mov	 BYTE PTR [eax+8], 0

; 6    : }

  0001e	8b 45 fc	 mov	 eax, DWORD PTR _this$[ebp]
  00021	c9		 leave
  00022	c3		 ret	 0
??0CReferenceObject@@QAE@XZ ENDP			; CReferenceObject::CReferenceObject
_TEXT	ENDS
END
